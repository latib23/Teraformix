import{c as Ge,b as qe,r as h,j as t,L as V,X as me,C as Ye,a as F,p as _,q as We,s as Ve,t as Ze}from"./index-CFXgF25F.js";import{E as Ke,a as He}from"./jspdf.plugin.autotable-CW2N7YIv.js";import{F as M}from"./file-text-Bqo2hmfu.js";import{R as ge}from"./refresh-cw-CuKYa5Dr.js";import{M as Z}from"./message-square-Cbaz_m1Q.js";import{C as Je}from"./clock-rqFjTchC.js";import{M as Xe}from"./mail-BAG_jpJT.js";import{F as ee}from"./file-down-DFNAX33r.js";import{C as et}from"./credit-card-C5CQPZxd.js";import{D as tt}from"./database-CuxKaStL.js";import{T as he}from"./trash-2-BTQl0KlL.js";import{C as at}from"./check-vUNAaaqM.js";/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const st=Ge("TrendingDown",[["polyline",{points:"22 17 13.5 8.5 8.5 13.5 2 7",key:"1r2t7k"}],["polyline",{points:"16 17 22 17 22 11",key:"11uiuu"}]]),nt=`1. Quotation Validity 
Unless otherwise stated in writing, this quotation is valid for 15 calendar days from the date issued. After the expiration date, Server Tech Central Inc. ("Seller") reserves the right to revise pricing, availability, or other terms.

2. Non-Binding Offer 
This quotation is not a binding agreement. It is provided solely for Buyer's review and does not obligate Seller to deliver goods or services until a formal Sales Order is accepted and confirmed by both parties in writing.

3. Availability & Lead Time 
All items quoted are subject to availability at the time of order placement. Inventory status can change rapidly, and Seller makes no guarantee of stock until a Sales Order is processed. Lead times provided are estimates and may vary due to supply chain constraints or vendor availability.

4. Pricing Adjustments 
Prices are based on current supplier costs, exchange rates, and applicable tariffs at the time of quotation. Seller reserves the right to adjust prices prior to final order confirmation if any of these conditions materially change.

5. Shipping & Handling 
Quoted prices may or may not include shipping, depending on how the quote is structured. If shipping is not included, it will be calculated and added upon order confirmation. Any shipping charges will be FOB Origin unless stated otherwise.

6. Taxes 
Quoted prices do not include applicable sales tax, unless explicitly stated. Buyer will be responsible for all applicable state, local, or federal taxes unless a valid resale or tax-exempt certificate is provided.

7. Payment Terms 
Payment terms will be specified at the time of final Sales Order issuance. Quoted items may be subject to credit approval. Accepted payment methods include ACH, Wire Transfer, Check, Credit Card, and PayPal (processing fees may apply for certain methods).

8. Custom and Special Orders 
Items marked as custom, non-stock, or special order are non-cancellable and non-returnable once the order is placed. These items may require additional lead time.

9. Typographical Errors 
Seller reserves the right to correct any typographical or clerical errors in the quotation without liability. If a pricing or specification error is found after quotation, an updated quote will be issued.

10. Governing Law 
This quotation, and any resulting transaction, shall be governed by the laws of the State of Texas, and any disputes shall be resolved exclusively in the state or federal courts located in Texas.`,ft=()=>{const{content:b}=qe(),[m,k]=h.useState([]),[P,A]=h.useState(!0),[E,U]=h.useState(null),[x,C]=h.useState("ALL"),[ue,z]=h.useState(!1),[w,te]=h.useState("QUOTE"),[r,ye]=h.useState(null),[K,be]=h.useState("Net 30"),[ae,se]=h.useState(!1),[fe,$]=h.useState(!1),[G,ne]=h.useState(null),[a,o]=h.useState({name:"",company:"",email:"",phone:"",billingStreet:"",billingCity:"",billingState:"",billingZip:"",billingCountry:"",shippingStreet:"",shippingCity:"",shippingState:"",shippingZip:"",shippingCountry:"",paymentTerms:"Net 30",notes:"",shippingCost:0,discount:0,items:[]}),[j,L]=h.useState({name:"",sku:"",quantity:1,unitPrice:0}),[lt,Ne]=h.useState(null),ve=e=>{var O,i,D,I;const s=e.guestName||((O=e.user)==null?void 0:O.name)||"",c=e.guestEmail||((i=e.user)==null?void 0:i.email)||"",l=e.guestPhone||"",u=e.guestCompany||((I=(D=e.user)==null?void 0:D.company)==null?void 0:I.name)||"",n=e.submissionData||{};let p="NEW";return e.status==="REVIEWED"?p="QUOTE_READY":e.status==="ACCEPTED"?p="COMPLETED":e.status==="REJECTED"?p="ARCHIVED":e.status==="AWAITING_PAYMENT"?p="AWAITING_PAYMENT":e.status==="PAID"?p="PAID":e.status==="PENDING"?p="NEW":["NEW","READ","QUOTE_READY","COMPLETED","ARCHIVED","PENDING","AWAITING_PAYMENT","PAID"].includes(e.status)&&(p=e.status),{id:e.id,type:e.type,submittedAt:e.createdAt,sourceUrl:"",status:p,data:{name:s,email:c,phone:l,company:u,subject:n.subject,message:n.message,parts:n.parts,timeline:n.timeline,fileName:n.fileName,fileContent:n.fileContent,notes:n.notes,quoteNumber:e.referenceNumber,competitorPrice:n.competitorPrice,shipping:n.shipping,billing:n.billing,cartCount:Array.isArray(n.cart)?n.cart.length:void 0,source:n.source,cart:Array.isArray(n.cart)?n.cart.map(g=>({name:g==null?void 0:g.name,sku:g==null?void 0:g.sku,quantity:g==null?void 0:g.quantity,unitPrice:g==null?void 0:g.unitPrice})):void 0,shippingCost:n.shippingCost,discount:n.discount,subtotal:n.subtotal,total:n.total,paymentTerms:n.paymentTerms||e.paymentTerms}}},Q=async()=>{A(!0);try{const e=await F.get("/quotes");if(e&&Array.isArray(e)){const s=e.map(ve);k(s);return}throw new Error("No data")}catch{const s=_.submissions.getAll();k(s)}finally{A(!1)}},je=async e=>{try{const c=`${We()}/quotes/${e.id}/file`,l=(()=>{try{return localStorage.getItem(Ve)||""}catch{return""}})(),u=await fetch(c,{method:"GET",headers:{...l?{Authorization:`Bearer ${l}`}:{}}});if(!u.ok)throw new Error("Download failed");const n=await u.blob(),p=document.createElement("a"),O=URL.createObjectURL(n);p.href=O,p.download=e.data.fileName||`bom-${e.id}`,document.body.appendChild(p),p.click(),document.body.removeChild(p),URL.revokeObjectURL(O)}catch{alert("Failed to download BOM file.")}};h.useEffect(()=>{Q()},[]);const S={total:m.length,abandoned:m.filter(e=>e.type==="ABANDONED_CHECKOUT").length,abandonedForm:m.filter(e=>e.type==="ABANDONED_FORM").length,bom:m.filter(e=>e.type==="BOM_UPLOAD").length,concierge:m.filter(e=>e.type==="CONCIERGE").length,bulk:m.filter(e=>e.type==="BULK_QUOTE").length,quoteBeating:m.filter(e=>e.type==="QUOTE_BEATING").length,manualQuote:m.filter(e=>e.type==="STANDARD_CART").length,contact:m.filter(e=>e.type==="CONTACT_US").length},Ce=m.filter(e=>x==="ALL"?!0:x==="ABANDONED"?e.type==="ABANDONED_CHECKOUT":x==="ABANDONED_FORM"?e.type==="ABANDONED_FORM":x==="BOM"?e.type==="BOM_UPLOAD":x==="CONCIERGE"?e.type==="CONCIERGE":x==="BULK_QUOTE"?e.type==="BULK_QUOTE":x==="QUOTE_BEATING"?e.type==="QUOTE_BEATING":x==="MANUAL_QUOTE"?e.type==="STANDARD_CART":x==="CONTACT_US"?e.type==="CONTACT_US":!0),we=e=>{confirm("Delete this request?")&&(_.submissions.delete(e),Q())},Se=async(e,s)=>{U(e),await new Promise(l=>setTimeout(l,500)),_.submissions.updateStatus(e,s);const c=m.map(l=>l.id===e?{...l,status:s}:l);k(c),U(null)},Te=async e=>{if(confirm("Sync this lead to Airtable?")){U(e);try{await F.post(`/quotes/${e}/sync`,{}),alert("Sync triggered successfully!")}catch(s){alert("Sync failed: "+(s.message||"Unknown error"))}finally{U(null)}}},Ae=async()=>{if(r){se(!0);try{const e=new Ke,s=e.internal.pageSize.getWidth(),c=e.internal.pageSize.getHeight(),l=[10,25,47],u=[245,247,250],n=[100,116,139],p=(()=>{try{const d=localStorage.getItem(Ze);return d?JSON.parse(d):null}catch{return null}})();if(e.setFillColor(l[0],l[1],l[2]),e.rect(0,0,s,40,"F"),e.setTextColor(255,255,255),b.settings.logoUrl)try{let d=b.settings.logoUrl;d.startsWith("/")&&(d=window.location.origin+d);const T=await(_e=>new Promise((Me,ze)=>{const R=new Image;R.crossOrigin="Anonymous",R.onload=()=>Me(R),R.onerror=ze,R.src=_e}))(d),X=T.width/T.height,pe=20,Re=pe*X;e.addImage(T,"PNG",15,10,Re,pe)}catch(d){console.warn("PDF Logo Load Failed",d),e.setFontSize(22),e.setFont("helvetica","bold"),e.text(b.settings.logoText||"Server Tech Central",15,25)}else e.setFontSize(22),e.setFont("helvetica","bold"),e.text(b.settings.logoText||"Server Tech Central",15,25);e.setFontSize(24),e.setFont("helvetica","bold"),e.setTextColor(255,255,255);const O=w==="INVOICE"?"INVOICE":"QUOTATION";e.text(O,s-15,25,{align:"right"});let i=55;e.setTextColor(0,0,0),e.setFontSize(10),e.setFont("helvetica","bold"),e.text("Server Tech Central Inc.",15,i),e.setFont("helvetica","normal"),e.setTextColor(n[0],n[1],n[2]),e.text(b.general.address||"123 Tech Blvd, Austin, TX 78701",15,i+5),e.text(`Phone: ${b.general.phone||"N/A"}`,15,i+10),e.text(`Email: ${b.general.email||"sales@servertechcentral.com"}`,15,i+15),p&&p.name&&e.text(`Sales Rep: ${p.name}`,15,i+20),e.setFontSize(8);let D=i+28;e.setFont("helvetica","bold"),e.text("CAGE:",15,D),e.setFont("helvetica","normal"),e.text(b.general.cageCode||"N/A",27,D),e.text("DUNS:",45,D),e.setFont("helvetica","normal"),e.text(b.general.dunsNumber||"N/A",57,D),e.setTextColor(0,0,0),e.setFontSize(10);const I=s-60,g=new Date,ie=new Date;ie.setDate(g.getDate()+15);const Pe=w==="INVOICE"?"Invoice #":"Quote #";e.setFont("helvetica","bold"),e.text(Pe,I,i),e.setFont("helvetica","normal"),e.text(r.data.quoteNumber||r.id.slice(0,8).toUpperCase(),s-15,i,{align:"right"}),i+=6,e.setFont("helvetica","bold"),e.text("Date:",I,i),e.setFont("helvetica","normal"),e.text(g.toLocaleDateString(),s-15,i,{align:"right"}),i+=6,e.setFont("helvetica","bold"),e.text(w==="INVOICE"?"Due Date:":"Expiry Date:",I,i),e.setFont("helvetica","normal"),e.text(ie.toLocaleDateString(),s-15,i,{align:"right"}),i+=6,e.setFont("helvetica","bold"),e.text("Payment Terms:",I,i),e.setFont("helvetica","normal"),e.text(K,s-15,i,{align:"right"}),i+=25;const f=(s-40)/2,q=35;e.setFillColor(u[0],u[1],u[2]),e.roundedRect(15,i,f,q,2,2,"F"),e.roundedRect(15+f+10,i,f,q,2,2,"F"),e.setFontSize(9),e.setTextColor(n[0],n[1],n[2]),e.setFont("helvetica","bold"),e.text("BILL TO:",20,i+8),e.setTextColor(0,0,0),e.setFontSize(10),e.text(r.data.company||r.data.name||"Valued Customer",20,i+16),e.setFontSize(9),e.setFont("helvetica","normal"),e.setTextColor(n[0],n[1],n[2]);let Y=i+22;const y=r.data.billing;y?(e.text(`${y.street||""}`,20,Y),e.text(`${y.city||""}, ${y.state||""} ${y.zip||""}`,20,Y+4),y.country&&e.text(y.country,20,Y+8)):e.text(r.data.email||"",20,Y),e.setFontSize(9),e.setTextColor(n[0],n[1],n[2]),e.setFont("helvetica","bold"),e.text("SHIP TO:",20+f+10,i+8),e.setTextColor(0,0,0),e.setFontSize(10);const N=r.data.shipping;N&&(N.firstName||N.lastName)?e.text(`${N.firstName} ${N.lastName}`,20+f+10,i+16):e.text(r.data.company||r.data.name||"Same as Billing",20+f+10,i+16),e.setFontSize(9),e.setFont("helvetica","normal"),e.setTextColor(n[0],n[1],n[2]);let B=i+22;if(N?(e.text(`${N.street||""}`,20+f+10,B),e.text(`${N.city||""}, ${N.state||""} ${N.zip||""}`,20+f+10,B+4),N.country&&e.text(N.country,20+f+10,B+8)):y&&(e.text(`${y.street||""}`,20+f+10,B),e.text(`${y.city||""}, ${y.state||""} ${y.zip||""}`,20+f+10,B+4),y.country&&e.text(y.country,20+f+10,B+8)),w==="INVOICE"){e.setTextColor(59,130,246);const d=i+q+8;e.textWithLink("PAY ONLINE NOW >>",s-15,d,{align:"right",url:`${window.location.origin}/pay-quote/${r.id}`})}const le=r.data.cart||[],Ue=le.length>0?le.map(d=>[d.name||"Item Request",d.sku||"N/A",d.quantity||1,`$${(d.unitPrice||0).toLocaleString("en-US",{minimumFractionDigits:2})}`,`$${((d.quantity||1)*(d.unitPrice||0)).toLocaleString("en-US",{minimumFractionDigits:2})}`]):[["Consultation / Custom Request","SVC-CUSTOM","1","TBD","TBD"]];He(e,{startY:i+q+15,head:[["Description","Part #","Qty","Unit Price","Total"]],body:Ue,theme:"grid",headStyles:{fillColor:[10,25,47],textColor:[255,255,255],fontStyle:"bold",halign:"left"},bodyStyles:{textColor:[30,41,59],lineColor:[226,232,240]},columnStyles:{0:{cellWidth:80},2:{halign:"center"},3:{halign:"right"},4:{halign:"right"}},styles:{fontSize:9,cellPadding:4}});const Be=e.lastAutoTable.finalY+10,re=r.data.subtotal||0,H=r.data.shippingCost||0,J=r.data.discount||0,$e=r.data.total||re+H-J,oe=s-80,de=s-15;let v=Be;const W=(d,xe,T=!1,X=10)=>{e.setFontSize(X),e.setFont("helvetica",T?"bold":"normal"),e.setTextColor(T?0:50,T?0:50,T?0:50),e.text(d,oe,v),e.text(xe,de,v,{align:"right"}),v+=6};W("Subtotal:",`$${re.toLocaleString("en-US",{minimumFractionDigits:2})}`),H>0&&W("Shipping:",`$${H.toLocaleString("en-US",{minimumFractionDigits:2})}`),J>0&&W("Discount:",`-$${J.toLocaleString("en-US",{minimumFractionDigits:2})}`),v+=2,e.setDrawColor(200,200,200),e.line(oe,v-6,de,v-6),W("Total:",`$${$e.toLocaleString("en-US",{minimumFractionDigits:2})}`,!0,12);const ce=c-50;v>ce-30?(e.addPage(),v=20):v=Math.max(v+10,ce),e.setFontSize(8),e.setTextColor(100,100,100),e.text("Terms & Conditions:",15,v),e.setFontSize(7);const Le=e.splitTextToSize(nt,s-30);e.text(Le,15,v+4);const Qe=`${w==="INVOICE"?"Invoice":"Quote"}-${r.data.quoteNumber||r.id.slice(0,8)}.pdf`;e.save(Qe),z(!1),await F.patch(`/quotes/${r.id}`,{paymentTerms:K,status:w==="INVOICE"&&r.status!=="PAID"?"AWAITING_PAYMENT":r.status}),Q()}catch(e){console.error("PDF Generation failed",e),alert("Failed to generate PDF")}finally{se(!1)}}},Ee=async e=>{try{U(e.id),await F.patch(`/quotes/${e.id}`,{status:"AWAITING_PAYMENT"});const s=`${window.location.origin}/pay-quote/${e.id}`;try{await navigator.clipboard.writeText(s),alert(`Invoice Created & Link Copied to Clipboard!

Link: ${s}`)}catch{Ne(s)}const c=m.map(l=>l.id===e.id?{...l,status:"AWAITING_PAYMENT"}:l);k(c)}catch(s){console.error("Invoice creation failed",s),alert(`Failed to create invoice link: ${s.message||"Unknown error"}`)}finally{U(null)}},Oe=()=>{ne(null),o({name:"",company:"",email:"",phone:"",billingStreet:"",billingCity:"",billingState:"",billingZip:"",billingCountry:"",shippingStreet:"",shippingCity:"",shippingState:"",shippingZip:"",shippingCountry:"",paymentTerms:"Net 30",notes:"",shippingCost:0,discount:0,items:[]}),$(!0)},De=e=>{ne(e.id);const s=e.data.billing||{},c=e.data.shipping||{},l=(e.data.cart||[]).map(u=>({name:u.name||"",sku:u.sku||"",quantity:u.quantity||1,unitPrice:u.unitPrice||0}));o({name:e.data.name||"",company:e.data.company||"",email:e.data.email||"",phone:e.data.phone||"",billingStreet:s.street||"",billingCity:s.city||"",billingState:s.state||"",billingZip:s.zip||"",billingCountry:s.country||"",shippingStreet:c.street||"",shippingCity:c.city||"",shippingState:c.state||"",shippingZip:c.zip||"",shippingCountry:c.country||"",paymentTerms:e.data.paymentTerms||"Net 30",notes:e.data.notes||"",shippingCost:e.data.shippingCost||0,discount:e.data.discount||0,items:l}),$(!0)},Ie=async()=>{try{A(!0);const e={name:a.name,company:a.company,email:a.email,phone:a.phone,billing:{street:a.billingStreet,city:a.billingCity,state:a.billingState,zip:a.billingZip,country:a.billingCountry},shipping:{street:a.shippingStreet,city:a.shippingCity,state:a.shippingState,zip:a.shippingZip,country:a.shippingCountry},paymentTerms:a.paymentTerms,notes:a.notes,cart:a.items,shippingCost:Number(a.shippingCost),discount:Number(a.discount)};if(G?await F.patch(`/quotes/${G}`,e):await F.post("/quotes/manual",e),a.email)try{if(!_.users.getBuyers().find(l=>l.email.toLowerCase()===a.email.toLowerCase())){const l={name:a.name||a.company||"Unknown",email:a.email,role:"BUYER",joinedAt:new Date().toISOString()};try{await F.post("/users/buyers",{name:l.name,email:l.email,password:Math.random().toString(36).slice(-8)})}catch{_.users.add(l)}console.log("Auto-created customer from quote:",l.email)}}catch(s){console.error("Failed to auto-add customer",s)}$(!1),Q()}catch(e){alert("Failed to save quote"),console.error(e)}finally{A(!1)}},Fe=()=>{j.name&&(o(e=>({...e,items:[...e.items,j]})),L({name:"",sku:"",quantity:1,unitPrice:0}))},ke=e=>{o(s=>({...s,items:s.items.filter((c,l)=>l!==e)}))};return t.jsxs("div",{children:[t.jsxs("div",{className:"mb-8 flex justify-between items-center",children:[t.jsxs("div",{children:[t.jsx("h3",{className:"text-lg font-bold text-navy-900",children:"Inbound Requests"}),t.jsx("p",{className:"text-sm text-gray-500",children:"Track Quote requests and BOM uploads."})]}),t.jsxs("div",{className:"flex gap-2",children:[t.jsxs("button",{onClick:Oe,className:"bg-navy-900 text-white px-4 py-2 rounded text-sm font-bold hover:bg-navy-800 transition flex items-center gap-2",children:[t.jsx(M,{className:"w-4 h-4"})," Create Quote"]}),t.jsx("button",{onClick:Q,className:"p-2 text-gray-500 hover:bg-gray-100 rounded-full",children:t.jsx(ge,{className:"w-4 h-4"})})]})]}),t.jsx("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 overflow-hidden min-h-[500px]",children:t.jsxs("div",{className:"p-6",children:[t.jsxs("div",{className:"flex flex-wrap gap-2 mb-4",children:[t.jsxs("button",{onClick:()=>C("ALL"),className:`px-3 py-1.5 text-xs font-bold rounded ${x==="ALL"?"bg-navy-900 text-white":"bg-gray-100 text-gray-700"}`,children:["All (",S.total,")"]}),t.jsxs("button",{onClick:()=>C("ABANDONED"),className:`px-3 py-1.5 text-xs font-bold rounded ${x==="ABANDONED"?"bg-orange-600 text-white":"bg-orange-100 text-orange-800"}`,children:["Abandoned Carts (",S.abandoned,")"]}),t.jsxs("button",{onClick:()=>C("ABANDONED_FORM"),className:`px-3 py-1.5 text-xs font-bold rounded ${x==="ABANDONED_FORM"?"bg-yellow-600 text-white":"bg-yellow-100 text-yellow-800"}`,children:["Abandoned Forms (",S.abandonedForm,")"]}),t.jsxs("button",{onClick:()=>C("BOM"),className:`px-3 py-1.5 text-xs font-bold rounded ${x==="BOM"?"bg-purple-600 text-white":"bg-purple-100 text-purple-800"}`,children:["BOM Uploads (",S.bom,")"]}),t.jsxs("button",{onClick:()=>C("CONCIERGE"),className:`px-3 py-1.5 text-xs font-bold rounded ${x==="CONCIERGE"?"bg-blue-600 text-white":"bg-blue-100 text-blue-800"}`,children:["Concierge (",S.concierge,")"]}),t.jsxs("button",{onClick:()=>C("BULK_QUOTE"),className:`px-3 py-1.5 text-xs font-bold rounded ${x==="BULK_QUOTE"?"bg-teal-600 text-white":"bg-teal-100 text-teal-800"}`,children:["Bulk Quotes (",S.bulk,")"]}),t.jsxs("button",{onClick:()=>C("QUOTE_BEATING"),className:`px-3 py-1.5 text-xs font-bold rounded ${x==="QUOTE_BEATING"?"bg-red-600 text-white":"bg-red-100 text-red-800"}`,children:["Quote Beating (",S.quoteBeating,")"]}),t.jsxs("button",{onClick:()=>C("MANUAL_QUOTE"),className:`px-3 py-1.5 text-xs font-bold rounded ${x==="MANUAL_QUOTE"?"bg-indigo-600 text-white":"bg-indigo-100 text-indigo-800"}`,children:["Quotes (",S.manualQuote,")"]}),t.jsxs("button",{onClick:()=>C("CONTACT_US"),className:`px-3 py-1.5 text-xs font-bold rounded ${x==="CONTACT_US"?"bg-green-600 text-white":"bg-green-100 text-green-800"}`,children:["Contact (",S.contact,")"]})]}),P?t.jsxs("div",{className:"flex justify-center py-12 text-gray-500",children:[t.jsx(V,{className:"w-6 h-6 animate-spin mr-2"})," Loading..."]}):m.length===0?t.jsxs("div",{className:"text-center py-20 text-gray-400",children:[t.jsx(Z,{className:"w-12 h-12 mx-auto mb-4 opacity-20"}),t.jsx("p",{children:"No submissions found."})]}):t.jsx("div",{className:"space-y-4",children:Ce.map(e=>t.jsx("div",{className:"border border-gray-200 rounded-lg p-4 hover:shadow-md transition bg-gray-50",children:t.jsxs("div",{className:"flex flex-col md:flex-row justify-between md:items-start gap-4",children:[t.jsxs("div",{className:"flex-grow",children:[t.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[e.type==="BOM_UPLOAD"?t.jsxs("span",{className:"bg-purple-100 text-purple-800 text-xs font-bold px-2 py-1 rounded flex items-center gap-1",children:[t.jsx(M,{className:"w-3 h-3"})," BOM Upload"]}):e.type==="ABANDONED_CHECKOUT"?t.jsxs("span",{className:"bg-orange-100 text-orange-800 text-xs font-bold px-2 py-1 rounded flex items-center gap-1",children:[t.jsx(Z,{className:"w-3 h-3"})," Abandoned Checkout"]}):e.type==="ABANDONED_FORM"?t.jsxs("span",{className:"bg-yellow-100 text-yellow-800 text-xs font-bold px-2 py-1 rounded flex items-center gap-1",children:[t.jsx(Z,{className:"w-3 h-3"})," Abandoned Form"]}):e.type==="QUOTE_BEATING"?t.jsxs("span",{className:"bg-red-100 text-red-800 text-xs font-bold px-2 py-1 rounded flex items-center gap-1",children:[t.jsx(st,{className:"w-3 h-3"})," Quote Beating"]}):t.jsxs("span",{className:"bg-blue-100 text-blue-800 text-xs font-bold px-2 py-1 rounded flex items-center gap-1",children:[t.jsx(Z,{className:"w-3 h-3"})," ",e.type==="BULK_QUOTE"?"Bulk Quote":e.type==="CONTACT_US"?"Contact Message":"Concierge"]}),t.jsxs("span",{className:"text-xs text-gray-500 font-mono",children:["Ref: ",e.data.quoteNumber||e.id]}),t.jsxs("span",{className:"text-xs text-gray-400 flex items-center gap-1",children:[t.jsx(Je,{className:"w-3 h-3"})," ",new Date(e.submittedAt).toLocaleString()]})]}),t.jsxs("div",{className:"mb-2",children:[t.jsxs("h4",{className:"font-bold text-navy-900 text-sm",children:[e.data.company?`${e.data.company} - `:"",e.data.name||"Guest"]}),t.jsxs("div",{className:"flex items-center gap-4 text-xs text-gray-600 mt-1",children:[t.jsxs("span",{className:"flex items-center gap-1",children:[t.jsx(Xe,{className:"w-3 h-3"})," ",e.data.email]}),e.data.phone&&t.jsx("span",{children:e.data.phone})]})]}),e.data.competitorPrice&&t.jsxs("div",{className:"bg-white p-3 rounded border border-gray-200 text-sm text-gray-700 font-mono mb-2",children:[t.jsx("span",{className:"text-gray-500 font-sans font-bold text-xs uppercase mr-2",children:"Target Price:"}),e.data.competitorPrice]}),e.data.subject&&t.jsxs("div",{className:"bg-white p-3 rounded border border-gray-200 text-sm text-gray-700 font-mono mb-2",children:[t.jsx("div",{className:"font-bold text-navy-900 border-b border-gray-100 pb-1 mb-1 font-sans",children:e.data.subject}),t.jsx("div",{className:"whitespace-pre-wrap font-sans",children:e.data.message})]}),e.data.parts&&t.jsx("div",{className:"bg-white p-3 rounded border border-gray-200 text-sm text-gray-700 font-mono mb-2",children:e.data.parts}),e.type==="ABANDONED_CHECKOUT"&&t.jsxs("div",{className:"text-xs text-gray-600 bg-white p-2 rounded border border-gray-200 mb-2",children:[t.jsxs("div",{className:"flex gap-6",children:[t.jsxs("div",{children:[t.jsxs("div",{children:[t.jsx("span",{className:"text-gray-500",children:"Email:"})," ",t.jsx("span",{className:"font-bold text-navy-900",children:e.data.email})]}),e.data.cartCount?t.jsxs("div",{children:[t.jsx("span",{className:"text-gray-500",children:"Cart Items:"})," ",t.jsx("span",{className:"font-bold text-navy-900",children:e.data.cartCount})]}):null]}),e.data.shipping?t.jsxs("div",{children:[t.jsx("div",{className:"text-gray-500",children:"Shipping"}),t.jsx("div",{className:"text-navy-900 font-medium",children:e.data.shipping.street}),t.jsxs("div",{className:"text-navy-900",children:[e.data.shipping.city,", ",e.data.shipping.state," ",e.data.shipping.zip]})]}):null,e.data.billing?t.jsxs("div",{children:[t.jsx("div",{className:"text-gray-500",children:"Billing"}),t.jsx("div",{className:"text-navy-900 font-medium",children:e.data.billing.street}),t.jsxs("div",{className:"text-navy-900",children:[e.data.billing.city,", ",e.data.billing.state," ",e.data.billing.zip]})]}):null]}),Array.isArray(e.data.cart)&&e.data.cart.length>0&&t.jsxs("div",{className:"mt-2 border-t border-gray-100 pt-2",children:[t.jsx("div",{className:"text-gray-500 mb-1",children:"Products"}),t.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-2",children:e.data.cart.map((s,c)=>t.jsxs("div",{className:"flex items-center justify-between bg-gray-50 p-2 rounded",children:[t.jsx("div",{className:"text-navy-900 font-medium truncate mr-2",children:s.name||s.sku}),t.jsx("div",{className:"text-gray-500 font-mono text-xs",children:s.sku}),t.jsxs("div",{className:"text-gray-700 text-xs ml-2",children:["x",s.quantity||1]})]},c))})]})]}),e.type==="ABANDONED_FORM"&&t.jsxs("div",{className:"text-xs text-gray-600 bg-white p-2 rounded border border-gray-200 mb-2",children:[t.jsxs("div",{children:[t.jsx("span",{className:"text-gray-500",children:"Email:"})," ",t.jsx("span",{className:"font-bold text-navy-900",children:e.data.email})]}),e.data.company?t.jsxs("div",{children:[t.jsx("span",{className:"text-gray-500",children:"Company:"})," ",t.jsx("span",{className:"font-bold text-navy-900",children:e.data.company})]}):null,e.data.notes?t.jsxs("div",{children:[t.jsx("span",{className:"text-gray-500",children:"Notes:"})," ",t.jsx("span",{className:"text-navy-900",children:e.data.notes})]}):null]}),e.data.fileName&&t.jsxs("div",{className:"flex items-center gap-2 bg-white p-2 rounded border border-gray-200 w-fit mb-2",children:[t.jsx(M,{className:"w-4 h-4 text-red-500"}),t.jsx("span",{className:"text-sm font-medium text-navy-900",children:e.data.fileName}),e.data.fileContent&&t.jsxs("span",{className:"text-xs text-gray-500",children:["â€¢ ",it(e.data.fileContent)]}),t.jsx("button",{onClick:()=>je(e),className:"ml-2 px-2 py-1 text-xs font-bold text-action-700 bg-action-100 rounded hover:bg-action-200",children:"Download"})]}),e.data.notes&&t.jsxs("p",{className:"text-xs text-gray-500 italic",children:["Note: ",e.data.notes]})]}),t.jsxs("div",{className:"flex flex-row md:flex-col items-center md:items-end gap-3 min-w-[150px]",children:[t.jsxs("div",{className:"w-full",children:[t.jsx("label",{className:"block text-xs font-bold text-gray-500 uppercase mb-1 text-right",children:"Status"}),t.jsxs("select",{value:e.status,disabled:E===e.id,onChange:s=>Se(e.id,s.target.value),className:"w-full bg-white border border-gray-300 text-sm rounded p-1.5 focus:ring-2 focus:ring-navy-900 outline-none",children:[t.jsx("option",{value:"NEW",children:"New Request"}),t.jsx("option",{value:"READ",children:"In Review"}),t.jsx("option",{value:"QUOTE_READY",children:"Quote Sent"}),t.jsx("option",{value:"COMPLETED",children:"Completed"}),t.jsx("option",{value:"ARCHIVED",children:"Archived"})]}),E===e.id&&t.jsx("span",{className:"text-xs text-gray-400 block text-right mt-1",children:"Updating..."})]}),t.jsxs("div",{className:"flex flex-col gap-2 mt-2 w-full",children:[t.jsxs("button",{onClick:()=>{ye(e),z(!0)},className:"w-full flex items-center justify-center gap-2 bg-navy-50 text-navy-900 border border-navy-200 hover:bg-navy-100 rounded px-3 py-1.5 text-xs font-bold transition",children:[t.jsx(ee,{className:"w-3 h-3"})," Generate PDF"]}),t.jsxs("button",{onClick:()=>De(e),className:"w-full flex items-center justify-center gap-2 bg-blue-50 text-blue-700 border border-blue-200 hover:bg-blue-100 rounded px-3 py-1.5 text-xs font-bold transition",children:[t.jsx(ge,{className:"w-3 h-3"})," Revise Quote"]}),t.jsxs("button",{onClick:()=>Ee(e),disabled:E===e.id,className:"w-full flex items-center justify-center gap-2 bg-green-50 text-green-700 border border-green-200 hover:bg-green-100 rounded px-3 py-1.5 text-xs font-bold transition",children:[t.jsx(et,{className:"w-3 h-3"})," Create Invoice"]}),t.jsxs("button",{onClick:()=>Te(e.id),disabled:E===e.id,className:"w-full flex items-center justify-center gap-2 bg-orange-50 text-orange-700 border border-orange-200 hover:bg-orange-100 rounded px-3 py-1.5 text-xs font-bold transition",children:[E===e.id?t.jsx(V,{className:"w-3 h-3 animate-spin"}):t.jsx(tt,{className:"w-3 h-3"})," Sync to Airtable"]})]}),t.jsx("button",{onClick:()=>we(e.id),className:"text-gray-400 hover:text-red-600 p-2 hover:bg-red-50 rounded-full transition mt-auto self-end",children:t.jsx(he,{className:"w-4 h-4"})})]})]})},e.id))})]})}),ue&&r&&t.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:t.jsxs("div",{className:"bg-white rounded-xl shadow-2xl max-w-lg w-full overflow-hidden animate-in fade-in zoom-in duration-200",children:[t.jsxs("div",{className:"p-6 border-b border-gray-100 flex justify-between items-center bg-gray-50",children:[t.jsxs("h3",{className:"font-bold text-navy-900 text-lg flex items-center gap-2",children:[t.jsx(ee,{className:"w-5 h-5 text-navy-600"}),"Generate PDF ",w==="INVOICE"?"Invoice":"Quote"]}),t.jsx("button",{onClick:()=>z(!1),className:"text-gray-400 hover:text-red-500 transition",children:t.jsx(me,{className:"w-5 h-5"})})]}),t.jsxs("div",{className:"p-6 space-y-6",children:[t.jsx("div",{className:"flex justify-center mb-4",children:t.jsxs("div",{className:"bg-gray-100 p-1 rounded-lg flex gap-1",children:[t.jsx("button",{onClick:()=>te("QUOTE"),className:`px-4 py-2 text-sm font-bold rounded-md transition ${w==="QUOTE"?"bg-white text-navy-900 shadow-sm":"text-gray-500 hover:text-navy-700"}`,children:"Quote"}),t.jsx("button",{onClick:()=>te("INVOICE"),className:`px-4 py-2 text-sm font-bold rounded-md transition ${w==="INVOICE"?"bg-white text-navy-900 shadow-sm":"text-gray-500 hover:text-navy-700"}`,children:"Invoice"})]})}),t.jsxs("div",{className:"bg-blue-50 text-blue-800 p-4 rounded-lg text-sm flex items-start gap-3",children:[t.jsx("div",{className:"bg-blue-200 p-1 rounded-full",children:t.jsx(M,{className:"w-4 h-4 text-blue-700"})}),t.jsxs("div",{children:[t.jsx("p",{className:"font-bold",children:"Ready to generate"}),t.jsxs("p",{className:"opacity-90 mt-1",children:["Generating quote PDF for ",t.jsx("span",{className:"font-bold",children:r.data.name}),r.data.company&&t.jsxs("span",{children:[" from ",r.data.company]}),"."]})]})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-bold text-gray-700 mb-2",children:"Payment Terms"}),t.jsxs("select",{value:K,onChange:e=>be(e.target.value),className:"w-full border border-gray-300 rounded-lg p-2.5 focus:ring-2 focus:ring-navy-900 outline-none",children:[t.jsx("option",{value:"Net 30",children:"Net 30 (Standard)"}),t.jsx("option",{value:"Due on Receipt",children:"Due on Receipt"}),t.jsx("option",{value:"Net 15",children:"Net 15"}),t.jsx("option",{value:"Net 45",children:"Net 45"}),t.jsx("option",{value:"Net 60",children:"Net 60"}),t.jsx("option",{value:"Prepayment",children:"Prepayment Required"})]}),t.jsx("p",{className:"text-xs text-gray-500 mt-2",children:"This will appear on the final PDF document."})]})]}),t.jsxs("div",{className:"p-6 border-t border-gray-100 bg-gray-50 flex justify-end gap-3",children:[t.jsx("button",{onClick:()=>z(!1),className:"px-4 py-2 text-gray-600 font-bold text-sm hover:bg-gray-200 rounded-lg transition",children:"Cancel"}),t.jsx("button",{onClick:Ae,disabled:ae,className:"px-6 py-2 bg-navy-900 text-white font-bold text-sm rounded-lg hover:bg-navy-800 transition flex items-center gap-2 disabled:opacity-50 disabled:cursor-not-allowed shadow-lg shadow-navy-900/20",children:ae?t.jsxs(t.Fragment,{children:[t.jsx(V,{className:"w-4 h-4 animate-spin"})," Generating..."]}):t.jsxs(t.Fragment,{children:[t.jsx(ee,{className:"w-4 h-4"})," Download PDF"]})})]})]})}),fe&&t.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4 overflow-y-auto",children:t.jsxs("div",{className:"bg-white rounded-xl shadow-2xl max-w-4xl w-full my-8 animate-in fade-in zoom-in duration-200",children:[t.jsxs("div",{className:"p-6 border-b border-gray-100 flex justify-between items-center bg-navy-900 text-white rounded-t-xl",children:[t.jsxs("h3",{className:"font-bold text-lg flex items-center gap-2",children:[t.jsx(M,{className:"w-5 h-5"}),G?"Revise Quote":"Create New Quote"]}),t.jsx("button",{onClick:()=>$(!1),className:"text-white/70 hover:text-white transition",children:t.jsx(me,{className:"w-5 h-5"})})]}),t.jsxs("div",{className:"p-6 space-y-6 max-h-[70vh] overflow-y-auto",children:[t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[t.jsxs("div",{className:"space-y-4",children:[t.jsx("h4",{className:"font-bold text-navy-900 border-b pb-2",children:"Customer Info"}),t.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[t.jsxs("div",{children:[t.jsx("label",{className:"block text-xs font-bold text-gray-500 uppercase mb-1",children:"Name *"}),t.jsx("input",{type:"text",value:a.name,onChange:e=>o({...a,name:e.target.value}),className:"w-full border p-2 rounded text-sm",placeholder:"John Doe"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-xs font-bold text-gray-500 uppercase mb-1",children:"Company *"}),t.jsx("input",{type:"text",value:a.company,onChange:e=>o({...a,company:e.target.value}),className:"w-full border p-2 rounded text-sm",placeholder:"Acme Inc"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-xs font-bold text-gray-500 uppercase mb-1",children:"Email"}),t.jsx("input",{type:"email",value:a.email,onChange:e=>o({...a,email:e.target.value}),className:"w-full border p-2 rounded text-sm",placeholder:"john@example.com"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-xs font-bold text-gray-500 uppercase mb-1",children:"Phone"}),t.jsx("input",{type:"tel",value:a.phone,onChange:e=>o({...a,phone:e.target.value}),className:"w-full border p-2 rounded text-sm",placeholder:"+1 555..."})]})]})]}),t.jsxs("div",{className:"space-y-4",children:[t.jsx("h4",{className:"font-bold text-navy-900 border-b pb-2",children:"Terms & Notes"}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-xs font-bold text-gray-500 uppercase mb-1",children:"Payment Terms"}),t.jsxs("select",{value:a.paymentTerms,onChange:e=>o({...a,paymentTerms:e.target.value}),className:"w-full border p-2 rounded text-sm",children:[t.jsx("option",{value:"Net 30",children:"Net 30"}),t.jsx("option",{value:"Due on Receipt",children:"Due on Receipt"}),t.jsx("option",{value:"Net 15",children:"Net 15"}),t.jsx("option",{value:"Net 45",children:"Net 45"}),t.jsx("option",{value:"Net 60",children:"Net 60"}),t.jsx("option",{value:"Prepayment",children:"Prepayment"})]})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-xs font-bold text-gray-500 uppercase mb-1",children:"Internal Notes"}),t.jsx("textarea",{value:a.notes,onChange:e=>o({...a,notes:e.target.value}),className:"w-full border p-2 rounded text-sm h-20",placeholder:"Notes..."})]})]})]}),t.jsxs("div",{className:"bg-gray-50 p-4 rounded-lg",children:[t.jsxs("div",{className:"flex justify-between items-center mb-4",children:[t.jsx("h4",{className:"font-bold text-gray-700 text-sm",children:"Addresses"}),t.jsxs("label",{className:"flex items-center gap-2 text-xs font-bold text-gray-600 cursor-pointer select-none",children:[t.jsx("input",{type:"checkbox",checked:JSON.stringify({street:a.shippingStreet,city:a.shippingCity,state:a.shippingState,zip:a.shippingZip,country:a.shippingCountry})===JSON.stringify({street:a.billingStreet,city:a.billingCity,state:a.billingState,zip:a.billingZip,country:a.billingCountry}),onChange:e=>{e.target.checked&&o(s=>({...s,shippingStreet:s.billingStreet,shippingCity:s.billingCity,shippingState:s.billingState,shippingZip:s.billingZip,shippingCountry:s.billingCountry}))},className:"text-navy-900 rounded focus:ring-navy-900"}),"Shipping same as Billing"]})]}),t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[t.jsxs("div",{className:"space-y-3",children:[t.jsx("h5",{className:"font-bold text-navy-900 text-xs uppercase border-b border-gray-200 pb-1",children:"Billing Address"}),t.jsx("input",{type:"text",placeholder:"Street",value:a.billingStreet,onChange:e=>o({...a,billingStreet:e.target.value}),className:"w-full border p-2 rounded text-xs"}),t.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[t.jsx("input",{type:"text",placeholder:"City",value:a.billingCity,onChange:e=>o({...a,billingCity:e.target.value}),className:"w-full border p-2 rounded text-xs"}),t.jsx("input",{type:"text",placeholder:"State",value:a.billingState,onChange:e=>o({...a,billingState:e.target.value}),className:"w-full border p-2 rounded text-xs"})]}),t.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[t.jsx("input",{type:"text",placeholder:"Zip",value:a.billingZip,onChange:e=>o({...a,billingZip:e.target.value}),className:"w-full border p-2 rounded text-xs"}),t.jsx("input",{type:"text",placeholder:"Country",value:a.billingCountry,onChange:e=>o({...a,billingCountry:e.target.value}),className:"w-full border p-2 rounded text-xs"})]})]}),t.jsxs("div",{className:"space-y-3",children:[t.jsx("h5",{className:"font-bold text-navy-900 text-xs uppercase border-b border-gray-200 pb-1",children:"Shipping Address"}),t.jsx("input",{type:"text",placeholder:"Street",value:a.shippingStreet,onChange:e=>o({...a,shippingStreet:e.target.value}),className:"w-full border p-2 rounded text-xs"}),t.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[t.jsx("input",{type:"text",placeholder:"City",value:a.shippingCity,onChange:e=>o({...a,shippingCity:e.target.value}),className:"w-full border p-2 rounded text-xs"}),t.jsx("input",{type:"text",placeholder:"State",value:a.shippingState,onChange:e=>o({...a,shippingState:e.target.value}),className:"w-full border p-2 rounded text-xs"})]}),t.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[t.jsx("input",{type:"text",placeholder:"Zip",value:a.shippingZip,onChange:e=>o({...a,shippingZip:e.target.value}),className:"w-full border p-2 rounded text-xs"}),t.jsx("input",{type:"text",placeholder:"Country",value:a.shippingCountry,onChange:e=>o({...a,shippingCountry:e.target.value}),className:"w-full border p-2 rounded text-xs"})]})]})]})]}),t.jsxs("div",{children:[t.jsx("h4",{className:"font-bold text-navy-900 border-b pb-2 mb-4",children:"Line Items"}),t.jsxs("div",{className:"bg-gray-50 p-4 rounded-lg mb-4 space-y-2",children:[a.items.map((e,s)=>t.jsxs("div",{className:"flex items-center gap-2 bg-white p-2 rounded border border-gray-200",children:[t.jsxs("div",{className:"flex-grow grid grid-cols-12 gap-2 text-sm",children:[t.jsx("div",{className:"col-span-5 font-medium",children:e.name}),t.jsx("div",{className:"col-span-3 text-gray-500 font-mono text-xs",children:e.sku}),t.jsxs("div",{className:"col-span-2 text-right",children:["x",e.quantity]}),t.jsxs("div",{className:"col-span-2 text-right",children:["$",e.unitPrice]})]}),t.jsx("button",{onClick:()=>ke(s),className:"text-red-500 hover:bg-red-50 p-1 rounded",children:t.jsx(he,{className:"w-4 h-4"})})]},s)),a.items.length===0&&t.jsx("p",{className:"text-center text-gray-400 text-sm py-2",children:"No items added yet."})]}),t.jsxs("div",{className:"flex gap-2 items-end bg-gray-100 p-3 rounded-lg",children:[t.jsxs("div",{className:"flex-grow",children:[t.jsx("label",{className:"block text-xs font-bold text-gray-500 uppercase mb-1",children:"Item Name"}),t.jsx("input",{type:"text",value:j.name,onChange:e=>L({...j,name:e.target.value}),className:"w-full border p-2 rounded text-sm",placeholder:"Server Rack..."})]}),t.jsxs("div",{className:"w-32",children:[t.jsx("label",{className:"block text-xs font-bold text-gray-500 uppercase mb-1",children:"SKU"}),t.jsx("input",{type:"text",value:j.sku,onChange:e=>L({...j,sku:e.target.value}),className:"w-full border p-2 rounded text-sm",placeholder:"SKU-123"})]}),t.jsxs("div",{className:"w-20",children:[t.jsx("label",{className:"block text-xs font-bold text-gray-500 uppercase mb-1",children:"Qty"}),t.jsx("input",{type:"number",value:j.quantity,onChange:e=>L({...j,quantity:parseInt(e.target.value)||1}),className:"w-full border p-2 rounded text-sm"})]}),t.jsxs("div",{className:"w-24",children:[t.jsx("label",{className:"block text-xs font-bold text-gray-500 uppercase mb-1",children:"Price"}),t.jsx("input",{type:"number",value:j.unitPrice,onChange:e=>L({...j,unitPrice:parseFloat(e.target.value)||0}),className:"w-full border p-2 rounded text-sm"})]}),t.jsx("button",{onClick:Fe,className:"bg-navy-900 text-white p-2 rounded hover:bg-navy-800 transition h-[38px]",children:t.jsx(at,{className:"w-4 h-4"})})]})]}),t.jsxs("div",{className:"bg-gray-50 p-4 rounded-lg",children:[t.jsx("h4",{className:"font-bold text-navy-900 border-b pb-2 mb-4",children:"Financials"}),t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[t.jsxs("div",{children:[t.jsx("label",{className:"block text-xs font-bold text-gray-500 uppercase mb-1",children:"Shipping Cost ($)"}),t.jsx("input",{type:"number",value:a.shippingCost,onChange:e=>o({...a,shippingCost:parseFloat(e.target.value)||0}),className:"w-full border p-2 rounded text-sm"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-xs font-bold text-gray-500 uppercase mb-1",children:"Discount ($)"}),t.jsx("input",{type:"number",value:a.discount,onChange:e=>o({...a,discount:parseFloat(e.target.value)||0}),className:"w-full border p-2 rounded text-sm"})]})]}),t.jsxs("div",{className:"mt-4 pt-4 border-t border-gray-200 space-y-2",children:[t.jsxs("div",{className:"flex justify-between text-sm",children:[t.jsx("span",{className:"text-gray-600",children:"Subtotal:"}),t.jsxs("span",{className:"font-bold",children:["$",a.items.reduce((e,s)=>e+s.quantity*s.unitPrice,0).toFixed(2)]})]}),t.jsxs("div",{className:"flex justify-between text-sm",children:[t.jsx("span",{className:"text-gray-600",children:"Shipping:"}),t.jsxs("span",{children:["$",(a.shippingCost||0).toFixed(2)]})]}),t.jsxs("div",{className:"flex justify-between text-sm text-green-600",children:[t.jsx("span",{className:"text-gray-600",children:"Discount:"}),t.jsxs("span",{children:["-$",(a.discount||0).toFixed(2)]})]}),t.jsxs("div",{className:"flex justify-between text-lg font-bold text-navy-900 pt-2 border-t border-gray-200",children:[t.jsx("span",{children:"Total:"}),t.jsxs("span",{children:["$",(a.items.reduce((e,s)=>e+s.quantity*s.unitPrice,0)+(a.shippingCost||0)-(a.discount||0)).toFixed(2)]})]})]})]})]}),t.jsxs("div",{className:"p-6 border-t border-gray-100 bg-gray-50 flex justify-end gap-3 rounded-b-xl",children:[t.jsx("button",{onClick:()=>$(!1),className:"px-4 py-2 text-gray-600 font-bold text-sm hover:bg-gray-200 rounded-lg transition",children:"Cancel"}),t.jsxs("button",{onClick:Ie,disabled:P,className:"px-6 py-2 bg-navy-900 text-white font-bold text-sm rounded-lg hover:bg-navy-800 transition flex items-center gap-2",children:[P?t.jsx(V,{className:"w-4 h-4 animate-spin"}):t.jsx(Ye,{className:"w-4 h-4"}),G?"Update Quote":"Create Quote"]})]})]})})]})},it=b=>{if(!b||typeof b!="string")return"";const m=b.match(/^data:(.+?);base64,(.*)$/);if(!m)return"";const k=m[2],P=Math.floor(k.length*3/4),A=P/(1024*1024);if(A>=1)return`${A.toFixed(2)} MB`;const E=P/1024;return`${Math.max(1,E).toFixed(0)} KB`};export{ft as default};
