import{b as A,r as o,j as e,S as v,X as D}from"./index-CFXgF25F.js";import{P as E}from"./plus-CrLdviO7.js";import{L as F}from"./layers-BksEl3FN.js";import{S as H}from"./square-pen-CCrpNvAB.js";import{T as M}from"./trash-2-BTQl0KlL.js";import{I as O}from"./image-CfZdfSD1.js";import{U as L}from"./upload-Bi7gtjrF.js";import{S as R}from"./save-VOrKx8th.js";const X=()=>{const{content:j,updateContent:p}=A(),[d,y]=o.useState(j.categories||[]),[N,c]=o.useState(!1),[f,h]=o.useState(!1),[l,u]=o.useState(null),[x,g]=o.useState("basic"),b={id:"",name:"",description:"",image:"",isActive:!0,seoTitle:"",seoDescription:"",seoH1:"",seoText:"",redirectTo:"",redirectPermanent:!1},[t,i]=o.useState(b),n=s=>{const{name:a,value:r}=s.target;i(m=>({...m,[a]:r}))},w=s=>{var r;const a=(r=s.target.files)==null?void 0:r[0];if(a){if(a.size>800*1024){alert("File size too large. Please upload an image under 800KB.");return}const m=new FileReader;m.onloadend=()=>{const I=m.result;i(P=>({...P,image:I}))},m.readAsDataURL(a)}},C=()=>{u(null),i(b),g("basic"),c(!0)},S=s=>{u(s.id),i({...s,seoTitle:s.seoTitle||"",seoDescription:s.seoDescription||"",seoH1:s.seoH1||"",seoText:s.seoText||"",redirectTo:s.redirectTo||"",redirectPermanent:!!s.redirectPermanent}),g("basic"),c(!0)},T=async s=>{if(window.confirm("Are you sure you want to delete this category? Products assigned to this category may lose their association.")){const a=d.filter(r=>r.id!==s);y(a),await p({categories:a})}},k=async s=>{s.preventDefault(),h(!0);try{let a;if(!l&&!t.id&&(t.id=t.name.toLowerCase().replace(/\s+/g,"-").replace(/[^a-z0-9-]/g,"")),l)a=d.map(r=>r.id===l?t:r);else{if(d.some(r=>r.id===t.id)){alert("A category with this ID already exists."),h(!1);return}a=[...d,t]}await p({categories:a}),y(a),c(!1),i(b),u(null)}catch(a){console.error("Failed to save category",a),alert("Failed to save category.")}finally{h(!1)}};return e.jsxs("div",{children:[e.jsxs("div",{className:"flex justify-between items-center mb-6",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-bold text-navy-900",children:"Category Management"}),e.jsx("p",{className:"text-sm text-gray-500",children:"Organize your product catalog structure."})]}),e.jsxs("button",{onClick:C,className:"bg-navy-900 hover:bg-navy-800 text-white px-4 py-2 rounded shadow flex items-center gap-2 text-sm font-bold transition",children:[e.jsx(E,{className:"w-4 h-4"})," Add Category"]})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:d.map(s=>e.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6 flex flex-col group",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-12 h-12 rounded-full bg-navy-50 border border-navy-100 flex items-center justify-center overflow-hidden",children:s.image?e.jsx("img",{src:s.image,alt:s.name,className:"w-full h-full object-cover"}):e.jsx(F,{className:"w-6 h-6 text-navy-400"})}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-bold text-navy-900",children:s.name}),e.jsxs("span",{className:"text-xs font-mono text-gray-400",children:["ID: ",s.id]})]})]}),e.jsxs("div",{className:"flex gap-1 opacity-0 group-hover:opacity-100 transition-opacity",children:[e.jsx("button",{onClick:()=>S(s),className:"p-2 text-gray-400 hover:text-navy-900 hover:bg-gray-100 rounded",children:e.jsx(H,{className:"w-4 h-4"})}),e.jsx("button",{onClick:()=>T(s.id),className:"p-2 text-gray-400 hover:text-red-600 hover:bg-red-50 rounded",children:e.jsx(M,{className:"w-4 h-4"})})]})]}),e.jsx("p",{className:"text-sm text-gray-600 mb-4 flex-grow line-clamp-2",children:s.description}),e.jsxs("div",{className:"pt-4 border-t border-gray-100 flex justify-between items-center text-xs",children:[e.jsx("span",{className:`px-2 py-1 rounded-full font-bold ${s.isActive?"bg-green-100 text-green-700":"bg-gray-100 text-gray-500"}`,children:s.isActive?"Active":"Hidden"}),s.seoTitle&&e.jsxs("span",{className:"flex items-center gap-1 text-blue-600",title:"SEO Configured",children:[e.jsx(v,{className:"w-3 h-3"})," SEO Set"]})]})]},s.id))}),N&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4 bg-navy-900/50 backdrop-blur-sm animate-fadeIn",children:e.jsxs("div",{className:"bg-white rounded-xl shadow-2xl w-full max-w-2xl overflow-hidden flex flex-col max-h-[90vh]",children:[e.jsxs("div",{className:"px-6 py-4 border-b border-gray-200 flex justify-between items-center bg-gray-50",children:[e.jsx("h3",{className:"text-lg font-bold text-navy-900",children:l?"Edit Category":"Add New Category"}),e.jsx("button",{onClick:()=>c(!1),className:"text-gray-400 hover:text-gray-600 transition",children:e.jsx(D,{className:"w-5 h-5"})})]}),e.jsx("div",{className:"border-b border-gray-200 bg-white px-6",children:e.jsxs("div",{className:"flex space-x-6",children:[e.jsx("button",{onClick:()=>g("basic"),className:`py-3 text-sm font-medium border-b-2 transition ${x==="basic"?"border-navy-900 text-navy-900":"border-transparent text-gray-500 hover:text-gray-700"}`,children:"Basic Info"}),e.jsxs("button",{onClick:()=>g("seo"),className:`py-3 text-sm font-medium border-b-2 transition flex items-center gap-2 ${x==="seo"?"border-navy-900 text-navy-900":"border-transparent text-gray-500 hover:text-gray-700"}`,children:[e.jsx(v,{className:"w-4 h-4"})," SEO & Content"]})]})}),e.jsx("div",{className:"p-6 overflow-y-auto",children:e.jsxs("form",{id:"categoryForm",onSubmit:k,className:"space-y-6",children:[x==="basic"&&e.jsxs("div",{className:"space-y-6 animate-fadeIn",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-1",children:"Category Name"}),e.jsx("input",{type:"text",name:"name",required:!0,value:t.name,onChange:n,className:"w-full border border-gray-300 rounded-lg px-3 py-2 bg-white text-sm focus:ring-2 focus:ring-navy-900 outline-none",placeholder:"e.g. Rack Servers"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-1",children:"ID / Slug"}),e.jsx("input",{type:"text",name:"id",disabled:!!l,value:t.id,onChange:n,className:"w-full border border-gray-300 rounded-lg px-3 py-2 bg-gray-50 text-sm focus:ring-2 focus:ring-navy-900 outline-none font-mono text-gray-600 disabled:text-gray-400",placeholder:l?t.id:"auto-generated"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-1",children:"Short Description (Card View)"}),e.jsx("input",{type:"text",name:"description",required:!0,value:t.description,onChange:n,className:"w-full border border-gray-300 rounded-lg px-3 py-2 bg-white text-sm focus:ring-2 focus:ring-navy-900 outline-none",placeholder:"e.g. High-performance compute nodes"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Category Image"}),e.jsxs("div",{className:"flex gap-4 items-center",children:[e.jsx("div",{className:"w-16 h-16 border border-gray-200 rounded-lg bg-gray-50 flex items-center justify-center overflow-hidden",children:t.image?e.jsx("img",{src:t.image,alt:"Preview",className:"w-full h-full object-cover"}):e.jsx(O,{className:"w-6 h-6 text-gray-300"})}),e.jsxs("div",{className:"flex-grow",children:[e.jsxs("label",{className:"cursor-pointer bg-white border border-gray-300 hover:bg-gray-50 text-navy-700 px-4 py-2 rounded-lg text-sm font-medium transition inline-flex items-center gap-2",children:[e.jsx(L,{className:"w-4 h-4"})," Upload Image",e.jsx("input",{type:"file",className:"hidden",accept:"image/*",onChange:w})]}),e.jsx("p",{className:"text-xs text-gray-400 mt-2",children:"Recommended: 400x400px, Max 800KB"})]})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("input",{type:"checkbox",id:"isActive",name:"isActive",checked:t.isActive,onChange:s=>i(a=>({...a,isActive:s.target.checked})),className:"rounded border-gray-300 text-navy-900 focus:ring-navy-900"}),e.jsx("label",{htmlFor:"isActive",className:"text-sm font-medium text-gray-700",children:"Active (Visible in Store)"})]})]}),x==="seo"&&e.jsxs("div",{className:"space-y-6 animate-fadeIn",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-1",children:"Page Title (Meta Title)"}),e.jsx("input",{type:"text",name:"seoTitle",value:t.seoTitle,onChange:n,className:"w-full border border-gray-300 rounded-lg px-3 py-2 bg-white text-sm focus:ring-2 focus:ring-navy-900 outline-none",placeholder:"e.g. Enterprise Servers | Dell & HPE | Server Tech Central"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-1",children:"H1 Headline (Top of Page)"}),e.jsx("input",{type:"text",name:"seoH1",value:t.seoH1,onChange:n,className:"w-full border border-gray-300 rounded-lg px-3 py-2 bg-white text-sm focus:ring-2 focus:ring-navy-900 outline-none font-bold",placeholder:"e.g. Enterprise Server Solutions"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-1",children:"Intro Paragraph (SEO Text)"}),e.jsx("textarea",{name:"seoText",value:t.seoText,onChange:n,rows:4,className:"w-full border border-gray-300 rounded-lg px-3 py-2 bg-white text-sm focus:ring-2 focus:ring-navy-900 outline-none",placeholder:"Detailed text displayed at the top of the category page..."})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-1",children:"Meta Description"}),e.jsx("textarea",{name:"seoDescription",value:t.seoDescription,onChange:n,rows:2,className:"w-full border border-gray-300 rounded-lg px-3 py-2 bg-white text-sm focus:ring-2 focus:ring-navy-900 outline-none",placeholder:"Summary for search engine results..."})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-1",children:"Redirect To (optional)"}),e.jsx("input",{type:"text",name:"redirectTo",value:t.redirectTo||"",onChange:n,className:"w-full border border-gray-300 rounded-lg px-3 py-2 bg-white text-sm focus:ring-2 focus:ring-navy-900 outline-none font-mono",placeholder:"/category/new-slug or https://domain/path"})]}),e.jsxs("div",{className:"flex items-center gap-2 pt-6",children:[e.jsx("input",{type:"checkbox",id:"redirectPermanent",checked:!!t.redirectPermanent,onChange:s=>i(a=>({...a,redirectPermanent:s.target.checked})),className:"rounded border-gray-300 text-navy-900 focus:ring-navy-900"}),e.jsx("label",{htmlFor:"redirectPermanent",className:"text-sm font-medium text-gray-700",children:"Permanent (301)"})]})]})]})]})}),e.jsxs("div",{className:"px-6 py-4 border-t border-gray-200 bg-gray-50 flex justify-end gap-3",children:[e.jsx("button",{type:"button",onClick:()=>c(!1),className:"px-4 py-2 text-sm font-medium text-gray-700 hover:bg-gray-200 rounded-lg transition",children:"Cancel"}),e.jsx("button",{type:"submit",form:"categoryForm",disabled:f,className:"px-4 py-2 bg-navy-900 hover:bg-navy-800 text-white text-sm font-bold rounded-lg shadow-sm transition flex items-center gap-2 disabled:opacity-70",children:f?"Saving...":e.jsxs(e.Fragment,{children:[e.jsx(R,{className:"w-4 h-4"})," Save Category"]})})]})]})})]})};export{X as default};
