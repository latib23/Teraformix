import{b as T,r as i,a as U,j as e,L as R,S as P}from"./index-CFXgF25F.js";import{L as q}from"./layers-BksEl3FN.js";import{S as E}from"./save-VOrKx8th.js";import{I as B}from"./image-CfZdfSD1.js";const $=()=>{const{content:g,updateContent:j}=T(),[b,c]=i.useState(g.landingCollections||[]),[u,p]=i.useState([]),[x,y]=i.useState(!1),[h,N]=i.useState("");i.useEffect(()=>{c(g.landingCollections||[])},[g.landingCollections]),i.useEffect(()=>{(async()=>{try{const s=await U.get("products/paginated?limit=100000&offset=0"),a=(Array.isArray(s==null?void 0:s.items)?s.items:[]).map(t=>({id:String(t.id||""),name:String(t.name||""),sku:String(t.sku||""),price:Number(t.price||t.basePrice||0),image:String(t.image||"")})).filter(t=>t.id&&t.name&&t.sku);p(a)}catch{p([])}})()},[]);const f=i.useMemo(()=>{const s=h.trim().toLowerCase();return s?u.filter(r=>(r.name||"").toLowerCase().includes(s)||(r.sku||"").toLowerCase().includes(s)):u},[u,h]),w=(s,r)=>{c(a=>{const t=[...a],n=new Set(t[s].productIds||[]);return n.has(r)?n.delete(r):n.add(r),t[s]={...t[s],productIds:Array.from(n)},t})},d=(s,r,a)=>{c(t=>{const n=[...t];return n[s]={...n[s],[r]:a},n})},C=s=>{c(r=>{const a=[...r],t=Array.isArray(a[s].testimonials)?a[s].testimonials:[];return a[s]={...a[s],testimonials:[...t,{quote:"",author:"",role:"",company:""}]},a})},m=(s,r,a,t)=>{c(n=>{const l=[...n],o=Array.isArray(l[s].testimonials)?[...l[s].testimonials]:[];return o[r]={...o[r],[a]:t},l[s]={...l[s],testimonials:o},l})},S=(s,r)=>{c(a=>{const t=[...a],n=(t[s].testimonials||[]).filter((l,o)=>o!==r);return t[s]={...t[s],testimonials:n},t})},A=s=>{c(r=>{const a=[...r],t=Array.isArray(a[s].logos)?a[s].logos:[];return a[s]={...a[s],logos:[...t,{name:"",imageUrl:""}]},a})},v=(s,r,a,t)=>{c(n=>{const l=[...n],o=Array.isArray(l[s].logos)?[...l[s].logos]:[];return o[r]={...o[r],[a]:t},l[s]={...l[s],logos:o},l})},L=(s,r)=>{c(a=>{const t=[...a],n=(t[s].logos||[]).filter((l,o)=>o!==r);return t[s]={...t[s],logos:n},t})},k=async()=>{try{y(!0),await j({landingCollections:b}),alert("Landing collections saved")}catch{alert("Failed to save")}finally{y(!1)}};return e.jsxs("div",{className:"max-w-6xl mx-auto",children:[e.jsxs("div",{className:"flex justify-between items-center mb-6",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(q,{className:"w-5 h-5 text-navy-700"}),e.jsx("h3",{className:"text-lg font-bold text-navy-900",children:"Landing Collections"})]}),e.jsxs("button",{onClick:k,disabled:x,className:"bg-action-600 hover:bg-action-500 disabled:bg-gray-400 text-white px-6 py-2 rounded shadow flex items-center gap-2 font-bold transition",children:[x?e.jsx(R,{className:"w-4 h-4 animate-spin"}):e.jsx(E,{className:"w-4 h-4"}),x?"Saving...":"Save All"]})]}),e.jsxs("div",{className:"bg-white border border-gray-200 rounded-lg p-4 mb-6",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(P,{className:"w-4 h-4 text-gray-400"}),e.jsx("input",{type:"text",value:h,onChange:s=>N(s.target.value),placeholder:"Search products by name or SKU...",className:"flex-grow border border-gray-300 rounded p-2 text-sm"})]}),e.jsx("div",{className:"mt-3 text-xs text-gray-500",children:"Search filters the list below when assigning products."})]}),e.jsx("div",{className:"space-y-8",children:b.map((s,r)=>e.jsxs("section",{className:"bg-white p-6 rounded-lg shadow-sm border border-gray-200",children:[e.jsx("div",{className:"flex items-center justify-between mb-4",children:e.jsxs("div",{children:[e.jsx("h4",{className:"text-md font-bold text-navy-900",children:s.title}),e.jsxs("p",{className:"text-xs text-gray-500",children:["Slug: ",s.slug]})]})}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Hero Title"}),e.jsx("input",{type:"text",value:s.heroTitle,onChange:a=>d(r,"heroTitle",a.target.value),className:"w-full border border-gray-300 rounded p-2 text-sm"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Hero Subtitle"}),e.jsx("input",{type:"text",value:s.heroSubtitle,onChange:a=>d(r,"heroSubtitle",a.target.value),className:"w-full border border-gray-300 rounded p-2 text-sm"})]}),e.jsxs("div",{className:"md:col-span-2",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Description"}),e.jsx("textarea",{rows:3,value:s.description,onChange:a=>d(r,"description",a.target.value),className:"w-full border border-gray-300 rounded p-2 text-sm"})]}),e.jsxs("div",{className:"md:col-span-2",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Banner Image URL"}),e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("input",{type:"text",value:s.bannerImage,onChange:a=>d(r,"bannerImage",a.target.value),className:"flex-grow border border-gray-300 rounded p-2 text-sm font-mono",placeholder:"https://..."}),e.jsx("div",{className:"w-32 h-20 border rounded bg-gray-50 flex items-center justify-center overflow-hidden",children:s.bannerImage?e.jsx("img",{src:s.bannerImage,alt:"Banner",className:"w-full h-full object-cover"}):e.jsx(B,{className:"w-6 h-6 text-gray-300"})})]})]})]}),e.jsxs("div",{className:"mt-6",children:[e.jsx("h5",{className:"text-sm font-bold text-navy-900 mb-2",children:"Assign Products"}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-3 max-h-64 overflow-y-auto border rounded p-3",children:f.map(a=>{const t=(s.productIds||[]).includes(a.id);return e.jsxs("button",{type:"button",onClick:()=>w(r,a.id),className:`flex items-center gap-3 p-2 rounded border text-left ${t?"border-action-600 bg-blue-50":"border-gray-200 hover:bg-gray-50"}`,children:[e.jsx("img",{src:a.image,alt:"",className:"w-10 h-10 rounded object-contain border"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("div",{className:"text-sm font-medium text-navy-900 line-clamp-1",children:a.name}),e.jsx("div",{className:"text-xs text-gray-500 font-mono",children:a.sku})]}),e.jsx("div",{className:`text-xs font-bold ${t?"text-action-600":"text-gray-400"}`,children:t?"Added":"Add"})]},a.id)})}),e.jsxs("div",{className:"text-xs text-gray-500 mt-2",children:["Selected: ",(s.productIds||[]).length," products"]})]}),e.jsxs("div",{className:"mt-8",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("h5",{className:"text-sm font-bold text-navy-900",children:"Testimonials"}),e.jsx("button",{type:"button",onClick:()=>C(r),className:"text-xs px-3 py-1 rounded bg-navy-900 text-white",children:"Add"})]}),e.jsx("div",{className:"space-y-3",children:(s.testimonials||[]).map((a,t)=>e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-3 items-start",children:[e.jsx("textarea",{rows:2,placeholder:"Quote",value:a.quote,onChange:n=>m(r,t,"quote",n.target.value),className:"md:col-span-2 border border-gray-300 rounded p-2 text-sm"}),e.jsx("input",{type:"text",placeholder:"Author",value:a.author,onChange:n=>m(r,t,"author",n.target.value),className:"border border-gray-300 rounded p-2 text-sm"}),e.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[e.jsx("input",{type:"text",placeholder:"Role",value:a.role||"",onChange:n=>m(r,t,"role",n.target.value),className:"border border-gray-300 rounded p-2 text-sm"}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("input",{type:"text",placeholder:"Company",value:a.company||"",onChange:n=>m(r,t,"company",n.target.value),className:"flex-1 border border-gray-300 rounded p-2 text-sm"}),e.jsx("button",{type:"button",onClick:()=>S(r,t),className:"text-xs px-3 py-1 rounded bg-red-100 text-red-700",children:"Remove"})]})]})]},t))})]}),e.jsxs("div",{className:"mt-8",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("h5",{className:"text-sm font-bold text-navy-900",children:"Customer Logos"}),e.jsx("button",{type:"button",onClick:()=>A(r),className:"text-xs px-3 py-1 rounded bg-navy-900 text-white",children:"Add"})]}),e.jsx("div",{className:"space-y-3",children:(s.logos||[]).map((a,t)=>e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-3 items-center",children:[e.jsx("input",{type:"text",placeholder:"Name",value:a.name,onChange:n=>v(r,t,"name",n.target.value),className:"border border-gray-300 rounded p-2 text-sm"}),e.jsx("input",{type:"text",placeholder:"Image URL",value:a.imageUrl,onChange:n=>v(r,t,"imageUrl",n.target.value),className:"border border-gray-300 rounded p-2 text-sm font-mono"}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("img",{src:a.imageUrl,alt:a.name,className:"w-20 h-10 object-contain border"}),e.jsx("button",{type:"button",onClick:()=>L(r,t),className:"text-xs px-3 py-1 rounded bg-red-100 text-red-700",children:"Remove"})]})]},t))})]})]},s.slug))})]})};export{$ as default};
