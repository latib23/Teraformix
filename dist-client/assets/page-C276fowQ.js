import{c as Ue,h as at,i as st,b as rt,r as i,a as D,j as e,A as nt,L as $e,X as ot,k as Ke}from"./index-CFXgF25F.js";import it from"./Header-C_SW7nKS.js";import lt from"./Footer-B1Tu_7x4.js";import{l as ct,E as dt,u as mt,a as ut,C as Ge}from"./react-stripe.esm-CVc7cBOf.js";import{T as Me}from"./truck-i18wuND8.js";import{M as ze}from"./map-pin-B0QKroLD.js";import{C as de}from"./check-vUNAaaqM.js";import{S as pt}from"./shopping-cart-DYMnb0eQ.js";import{C as gt,a as ht}from"./chevron-up-Cjtcu5WR.js";import{A as me}from"./alert-circle-Bm76VoOK.js";import{R as yt}from"./refresh-cw-CuKYa5Dr.js";import{S as ft}from"./shield-check-Cy8fN0mD.js";import{C as bt}from"./credit-card-C5CQPZxd.js";import{F as xt}from"./file-text-Bqo2hmfu.js";import"./mail-BAG_jpJT.js";import"./phone-BECx4-5W.js";import"./Image-1076sJ0o.js";import"./log-out-DrwdvGzO.js";import"./upload-Bi7gtjrF.js";import"./user-B-hCEkTO.js";import"./award-B6s_1h76.js";import"./lock-Cz0cqC_5.js";/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vt=Ue("Banknote",[["rect",{width:"20",height:"12",x:"2",y:"6",rx:"2",key:"9lu3g6"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}],["path",{d:"M6 12h.01M18 12h.01",key:"113zkx"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Nt=Ue("Plane",[["path",{d:"M17.8 19.2 16 11l3.5-3.5C21 6 21.5 4 21 3c-1-.5-3 0-4.5 1.5L13 8 4.8 6.2c-.5-.1-.9.1-1.1.5l-.3.5c-.2.5-.1 1 .3 1.3L9 12l-2 3H4l-1 1 3 2 2 3 1-1v-3l3-2 3.5 5.3c.3.4.8.5 1.3.3l.5-.2c.4-.3.6-.7.5-1.2z",key:"1v9wt8"}]]),x={BASE_URL:"/",DEV:!1,MODE:"production",PROD:!0,SSR:!1},q={US:{name:"United States",code:"+1",mask:"(###) ###-####",labelState:"State",labelZip:"Zip Code",regions:["AL","AK","AZ","AR","CA","CO","CT","DE","FL","GA","HI","ID","IL","IN","IA","KS","KY","LA","ME","MD","MA","MI","MN","MS","MO","MT","NE","NV","NH","NJ","NM","NY","NC","ND","OH","OK","OR","PA","RI","SC","SD","TN","TX","UT","VT","VA","WA","WV","WI","WY"]},CA:{name:"Canada",code:"+1",mask:"(###) ###-####",labelState:"Province",labelZip:"Postal Code",regions:["AB","BC","MB","NB","NL","NS","NT","NU","ON","PE","QC","SK","YT"]},GB:{name:"United Kingdom",code:"+44",mask:"#### ######",labelState:"Region",labelZip:"Postcode",regions:["England","Scotland","Wales","Northern Ireland"]},AU:{name:"Australia",code:"+61",mask:"#### ### ###",labelState:"State",labelZip:"Postcode",regions:["NSW","VIC","QLD","WA","SA","TAS","ACT","NT"]},AL:{name:"Albania",code:"+355",mask:"## ### ####",labelState:"County",labelZip:"Postal Code",regions:[]},AD:{name:"Andorra",code:"+376",mask:"### ###",labelState:"Parish",labelZip:"Postal Code",regions:[]},AM:{name:"Armenia",code:"+374",mask:"## ######",labelState:"Province",labelZip:"Postal Code",regions:[]},AT:{name:"Austria",code:"+43",mask:"#### #######",labelState:"State",labelZip:"Postcode",regions:[]},BY:{name:"Belarus",code:"+375",mask:"## ###-##-##",labelState:"Region",labelZip:"Postal Code",regions:[]},BE:{name:"Belgium",code:"+32",mask:"### ## ## ##",labelState:"Province",labelZip:"Postcode",regions:[]},BA:{name:"Bosnia and Herzegovina",code:"+387",mask:"## ###-###",labelState:"Canton",labelZip:"Postal Code",regions:[]},BG:{name:"Bulgaria",code:"+359",mask:"## ### ###",labelState:"District",labelZip:"Postal Code",regions:[]},HR:{name:"Croatia",code:"+385",mask:"## #### ###",labelState:"County",labelZip:"Postal Code",regions:[]},CY:{name:"Cyprus",code:"+357",mask:"## ######",labelState:"District",labelZip:"Postcode",regions:[]},CZ:{name:"Czech Republic",code:"+420",mask:"### ### ###",labelState:"Region",labelZip:"Postal Code",regions:[]},DK:{name:"Denmark",code:"+45",mask:"## ## ## ##",labelState:"Region",labelZip:"Postcode",regions:[]},EE:{name:"Estonia",code:"+372",mask:"#### ####",labelState:"County",labelZip:"Postal Code",regions:[]},FI:{name:"Finland",code:"+358",mask:"## ### ## ##",labelState:"Region",labelZip:"Postcode",regions:[]},FR:{name:"France",code:"+33",mask:"# ## ## ## ##",labelState:"Region",labelZip:"Postcode",regions:[]},GE:{name:"Georgia",code:"+995",mask:"### ## ## ##",labelState:"Region",labelZip:"Postal Code",regions:[]},DE:{name:"Germany",code:"+49",mask:"#### #######",labelState:"State",labelZip:"Postcode",regions:[]},GR:{name:"Greece",code:"+30",mask:"### #######",labelState:"Region",labelZip:"Postcode",regions:[]},HU:{name:"Hungary",code:"+36",mask:"## ### ####",labelState:"County",labelZip:"Postal Code",regions:[]},IS:{name:"Iceland",code:"+354",mask:"### ####",labelState:"Region",labelZip:"Postcode",regions:[]},IE:{name:"Ireland",code:"+353",mask:"## #######",labelState:"County",labelZip:"Eircode",regions:[]},IL:{name:"Israel",code:"+972",mask:"### ### ####",labelState:"District",labelZip:"Postal Code",regions:[]},IT:{name:"Italy",code:"+39",mask:"### #######",labelState:"Region",labelZip:"Postcode",regions:[]},JP:{name:"Japan",code:"+81",mask:"## #### ####",labelState:"Prefecture",labelZip:"Postal Code",regions:[]},KZ:{name:"Kazakhstan",code:"+7",mask:"(###) ###-##-##",labelState:"Region",labelZip:"Postal Code",regions:[]},XK:{name:"Kosovo",code:"+383",mask:"## ### ###",labelState:"District",labelZip:"Postal Code",regions:[]},LV:{name:"Latvia",code:"+371",mask:"## ### ###",labelState:"Municipality",labelZip:"Postal Code",regions:[]},LI:{name:"Liechtenstein",code:"+423",mask:"### ### ###",labelState:"Municipality",labelZip:"Postal Code",regions:[]},LT:{name:"Lithuania",code:"+370",mask:"(8-###) #####",labelState:"County",labelZip:"Postal Code",regions:[]},LU:{name:"Luxembourg",code:"+352",mask:"### #####",labelState:"District",labelZip:"Postcode",regions:[]},MT:{name:"Malta",code:"+356",mask:"#### ####",labelState:"Region",labelZip:"Postcode",regions:[]},MX:{name:"Mexico",code:"+52",mask:"## #### ####",labelState:"State",labelZip:"Postal Code",regions:[]},MD:{name:"Moldova",code:"+373",mask:"#### ####",labelState:"District",labelZip:"Postal Code",regions:[]},MC:{name:"Monaco",code:"+377",mask:"## ## ## ##",labelState:"District",labelZip:"Postcode",regions:[]},ME:{name:"Montenegro",code:"+382",mask:"## ### ###",labelState:"Municipality",labelZip:"Postal Code",regions:[]},NL:{name:"Netherlands",code:"+31",mask:"## #######",labelState:"Province",labelZip:"Postcode",regions:[]},MK:{name:"North Macedonia",code:"+389",mask:"## ### ###",labelState:"Municipality",labelZip:"Postal Code",regions:[]},NO:{name:"Norway",code:"+47",mask:"### ## ###",labelState:"County",labelZip:"Postcode",regions:[]},PL:{name:"Poland",code:"+48",mask:"### ### ###",labelState:"Voivodeship",labelZip:"Postcode",regions:[]},PT:{name:"Portugal",code:"+351",mask:"## ### ####",labelState:"District",labelZip:"Postcode",regions:[]},RO:{name:"Romania",code:"+40",mask:"## ### ####",labelState:"County",labelZip:"Postal Code",regions:[]},RU:{name:"Russia",code:"+7",mask:"(###) ###-##-##",labelState:"Oblast",labelZip:"Postal Code",regions:[]},SM:{name:"San Marino",code:"+378",mask:"#### ######",labelState:"Municipality",labelZip:"Postal Code",regions:[]},RS:{name:"Serbia",code:"+381",mask:"## ### ####",labelState:"District",labelZip:"Postal Code",regions:[]},SG:{name:"Singapore",code:"+65",mask:"#### ####",labelState:"Region",labelZip:"Postal Code",regions:[]},SK:{name:"Slovakia",code:"+421",mask:"### ### ###",labelState:"Region",labelZip:"Postal Code",regions:[]},SI:{name:"Slovenia",code:"+386",mask:"## ### ###",labelState:"Region",labelZip:"Postal Code",regions:[]},ES:{name:"Spain",code:"+34",mask:"### ## ## ##",labelState:"Province",labelZip:"Postal Code",regions:[]},SE:{name:"Sweden",code:"+46",mask:"##-### ## ##",labelState:"County",labelZip:"Postal Code",regions:[]},CH:{name:"Switzerland",code:"+41",mask:"## ### ## ##",labelState:"Canton",labelZip:"Postal Code",regions:[]},TR:{name:"Turkey",code:"+90",mask:"(###) ### ## ##",labelState:"Province",labelZip:"Postal Code",regions:[]},UA:{name:"Ukraine",code:"+380",mask:"## ### ## ##",labelState:"Oblast",labelZip:"Postal Code",regions:[]},VA:{name:"Vatican City",code:"+39",mask:"## #### ####",labelState:"AC",labelZip:"Postal Code",regions:[]},SA:{name:"Saudi Arabia",code:"+966",mask:"## ### ####",labelState:"Province",labelZip:"Postal Code",regions:["Riyadh","Makkah","Madinah","Eastern Province","Asir","Tabuk","Hail","Northern Borders","Jazan","Najran","Al-Bahah","Al-Jawf","Al-Qassim"]},AE:{name:"United Arab Emirates",code:"+971",mask:"## ### ####",labelState:"Emirate",labelZip:"Postal Code",regions:["Abu Dhabi","Dubai","Sharjah","Ajman","Umm Al-Quwain","Ras Al-Khaimah","Fujairah"]},QA:{name:"Qatar",code:"+974",mask:"#### ####",labelState:"Municipality",labelZip:"Postal Code",regions:["Ad-Dawhah","Al-Khawr","Al-Wakrah","Ar-Rayyan","Ash-Shamahal","Az-Zayayin","Umm Salal","Al-Daayen"]},KW:{name:"Kuwait",code:"+965",mask:"#### ####",labelState:"Governorate",labelZip:"Postal Code",regions:["Al-Asimah","Hawalli","Farwaniya","Mubarak Al-Kabeer","Ahmadi","Jahra"]},BH:{name:"Bahrain",code:"+973",mask:"#### ####",labelState:"Governorate",labelZip:"Postal Code",regions:["Capital","Muharraq","Northern","Southern"]},OM:{name:"Oman",code:"+968",mask:"#### ####",labelState:"Governorate",labelZip:"Postal Code",regions:["Muscat","Dhofar","Musandam","Al Buraimi","Al Dakhiliyah","Al Batinah North","Al Batinah South","Al Sharqiyah North","Al Sharqiyah South","Al Dhahirah","Al Wusta"]}};let F=null,Q=null;const ce=((x==null?void 0:x.VITE_RECAPTCHA_SITE_KEY)||"").trim(),wt=(R,h)=>{if(!R)return R;const j=R.replace(/\D/g,"");return h==="US"||h==="CA"?j.length<=3?j:j.length<=6?`(${j.slice(0,3)}) ${j.slice(3)}`:`(${j.slice(0,3)}) ${j.slice(3,6)}-${j.slice(6,10)}`:R},jt=({total:R,handlePlaceOrder:h,isProcessing:j,paymentMethod:I,setPaymentMethod:C,poNumber:ee,setPoNumber:te,poFile:n,setPoFile:Y,handlePoUpload:d,stripeError:V,bankInstructions:m,enablePO:K,enableBankTransfer:A})=>{const Z=mt(),L=ut();return e.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-sm border border-gray-200",children:[e.jsxs("h2",{className:"text-xl font-bold text-navy-900 mb-6 flex items-center gap-2",children:[e.jsx("span",{className:"bg-navy-900 text-white w-6 h-6 rounded-full flex items-center justify-center text-xs",children:"3"}),"Payment Method"]}),e.jsxs("div",{className:"flex gap-4 mb-8",children:[e.jsxs("button",{onClick:()=>C("CC"),className:`flex-1 py-3 border rounded-lg bg-white flex items-center justify-center gap-2 font-medium transition focus:outline-none focus:ring-2 focus:ring-navy-500 ${I==="CC"?"bg-navy-50 border-navy-500 text-navy-900 ring-1 ring-navy-500 shadow-sm":"border-gray-200 text-gray-500 hover:bg-gray-50"}`,children:[e.jsx(bt,{className:"w-5 h-5"})," Credit Card"]}),K&&e.jsxs("button",{onClick:()=>C("PO"),className:`flex-1 py-3 border rounded-lg bg-white flex items-center justify-center gap-2 font-medium transition focus:outline-none focus:ring-2 focus:ring-navy-500 ${I==="PO"?"bg-navy-50 border-navy-500 text-navy-900 ring-1 ring-navy-500 shadow-sm":"border-gray-200 text-gray-500 hover:bg-gray-50"}`,children:[e.jsx(xt,{className:"w-5 h-5"})," Purchase Order"]}),A&&e.jsxs("button",{onClick:()=>C("BANK"),className:`flex-1 py-3 border rounded-lg bg-white flex items-center justify-center gap-2 font-medium transition focus:outline-none focus:ring-2 focus:ring-navy-500 ${I==="BANK"?"bg-navy-50 border-navy-500 text-navy-900 ring-1 ring-navy-500 shadow-sm":"border-gray-200 text-gray-500 hover:bg-gray-50"}`,children:[e.jsx(vt,{className:"w-5 h-5"})," Bank Transfer"]})]}),I==="CC"?e.jsxs("div",{className:"space-y-4 animate-fadeIn",children:[e.jsx("div",{className:"border border-gray-300 bg-white rounded p-4",children:e.jsx(Ge,{options:{style:{base:{fontSize:"16px",color:"#424770","::placeholder":{color:"#aab7c4"}},invalid:{color:"#9e2146"}}}})}),V&&e.jsxs("div",{className:"p-3 bg-red-50 border border-red-100 rounded text-red-600 text-sm flex items-center gap-2",children:[e.jsx(me,{className:"w-4 h-4"})," ",V]})]}):I==="PO"?e.jsxs("div",{className:"space-y-4 animate-fadeIn",children:[e.jsxs("div",{className:"p-4 bg-blue-50 text-blue-800 text-sm rounded border border-blue-100",children:[e.jsx("span",{className:"font-bold",children:"Net 30 Terms:"})," Subject to credit approval. Please upload your signed PO."]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["PO Number ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{type:"text",value:ee,onChange:M=>te(M.target.value),className:"w-full border border-gray-300 bg-white rounded p-2.5 text-sm focus:ring-2 focus:ring-navy-900 focus:outline-none",placeholder:"PO-2023-XXXX"})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Upload PO Document (PDF) ",e.jsx("span",{className:"text-red-500",children:"*"})]}),n?e.jsxs("div",{className:"flex items-center justify-between p-3 bg-green-50 border border-green-200 rounded text-green-800 animate-fadeIn",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"bg-green-100 p-1.5 rounded-full",children:e.jsx(de,{className:"w-4 h-4 text-green-600"})}),e.jsxs("div",{className:"text-sm",children:[e.jsx("span",{className:"font-bold block text-green-700",children:"File Uploaded Successfully"}),e.jsx("span",{className:"text-xs text-green-600 block truncate max-w-[200px]",children:n.name})]})]}),e.jsx("button",{onClick:()=>Y(null),className:"text-gray-400 hover:text-red-500 p-1 rounded-full hover:bg-red-50 transition",title:"Remove file",children:e.jsx(ot,{className:"w-4 h-4"})})]}):e.jsx("input",{type:"file",accept:".pdf",onChange:d,className:"w-full border border-gray-300 bg-white rounded p-2 text-sm text-gray-500 file:mr-4 file:py-2 file:px-4 file:rounded file:border-0 file:text-sm file:font-semibold file:bg-navy-50 file:text-navy-700 hover:file:bg-navy-100 cursor-pointer"})]})]}):e.jsxs("div",{className:"space-y-4 animate-fadeIn",children:[e.jsxs("div",{className:"p-4 bg-blue-50 text-blue-800 text-sm rounded border border-blue-100",children:[e.jsx("span",{className:"font-bold",children:"Bank Transfer:"})," Use the instructions below to complete payment. Your order will be pending until we confirm receipt."]}),m&&e.jsx("pre",{className:"bg-white border border-gray-200 rounded p-4 text-sm text-gray-700 whitespace-pre-wrap font-mono",children:m})]}),e.jsxs("button",{onClick:()=>{I==="CC"&&(!Z||!L)||h(Z,L)},disabled:I==="CC"?j||!Z||!L:j,className:"w-full mt-8 bg-action-600 hover:bg-action-500 disabled:bg-gray-400 text-white font-bold py-3.5 rounded shadow-lg transition transform active:scale-[0.99] focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-action-600 flex items-center justify-center gap-2",children:[j&&e.jsx($e,{className:"w-5 h-5 animate-spin"}),j?"Processing Order...":I==="CC"&&(!Z||!L)?"Initializing Paymentâ€¦":`Pay $${R.toLocaleString()}`]}),e.jsxs("div",{className:"mt-4 flex items-center justify-center gap-2 text-xs text-gray-400",children:[e.jsx("div",{className:"w-2 h-2 bg-green-500 rounded-full"}),"256-bit SSL Encrypted Transaction"]})]})},Wt=()=>{var Ie,Le,Re,Ze,Oe,Be,Te,De;const R=at(),{cart:h,cartTotal:j,clearCart:I}=st(),{content:C}=rt(),{cageCode:ee,dunsNumber:te}=C.general,[n,Y]=i.useState({firstName:"",lastName:"",company:"",email:"",street:"",city:"",state:"",zip:"",country:"US",phone:""}),[d,V]=i.useState({firstName:"",lastName:"",company:"",email:"",street:"",city:"",state:"",zip:"",country:"US",phone:""}),[m,K]=i.useState({}),[A,Z]=i.useState("CC"),[L,M]=i.useState("SHIPPING"),[O,qe]=i.useState(!0),[g,W]=i.useState(null),[ae,se]=i.useState([]),[Fe,ue]=i.useState(!1),[pe,ge]=i.useState(""),[he,ye]=i.useState(null),[re,fe]=i.useState(!1);i.useEffect(()=>{try{typeof window<"u"&&fe(window.innerWidth>=768)}catch{}},[]);const be=i.useRef(!0),[Ve,ne]=i.useState(!1),[oe,He]=i.useState(""),[Ye,E]=i.useState(""),_=i.useRef(null),X=i.useRef(null),ie=(x==null?void 0:x.VITE_GOOGLE_MAPS_API_KEY)||"",xe=i.useRef(n),ve=i.useRef(d),Ne=i.useRef(h);i.useEffect(()=>{xe.current=n},[n]),i.useEffect(()=>{ve.current=d},[d]),i.useEffect(()=>{Ne.current=h},[h]);const we=()=>{var s,a;return!ie||(a=(s=window.google)==null?void 0:s.maps)!=null&&a.places?Promise.resolve():F||(Array.from(document.scripts).some(o=>o.src.includes("maps.googleapis.com/maps/api/js"))?(F=new Promise(o=>{const u=()=>{var l,r;(r=(l=window.google)==null?void 0:l.maps)!=null&&r.places?o():setTimeout(u,50)};u()}),F):(F=new Promise(o=>{const u=document.createElement("script");u.src=`https://maps.googleapis.com/maps/api/js?key=${ie}&libraries=places`,u.async=!0,u.onload=()=>o(),document.head.appendChild(u)}),F))},We=t=>{const s=window.grecaptcha;if(s&&typeof s.ready=="function")return new Promise(r=>{try{s.ready(()=>r())}catch{r()}});if(Q)return Q;const a=(t||Se||"").trim();let o=null;for(const r of Array.from(document.scripts))if(r.src.includes("recaptcha/api.js")){o=r.src;break}let u="";if(o){const r=o.indexOf("render=");r>=0&&(u=o.slice(r+7).split("&")[0])}let l=!!o;if(l&&a&&u&&u!==a){for(const r of Array.from(document.scripts))if(r.src.includes("recaptcha/api.js"))try{r.remove()}catch{}try{delete window.grecaptcha}catch{}l=!1}return Q=new Promise(r=>{const k=()=>{const b=window.grecaptcha;if(b&&typeof b.ready=="function")try{b.ready(()=>r())}catch{r()}else setTimeout(k,50)};if(l)k();else{const b=document.createElement("script"),v=a;b.src=`https://www.google.com/recaptcha/api.js?render=${v}`,b.async=!0,b.onload=()=>k(),b.onerror=()=>{const P=document.createElement("script");P.src=`https://www.recaptcha.net/recaptcha/api.js?render=${v}`,P.async=!0,P.onload=()=>k(),document.head.appendChild(P)},document.head.appendChild(b)}}),Q};i.useEffect(()=>{_.current&&we().then(()=>{var a;const t=window.google;if(!((a=t==null?void 0:t.maps)!=null&&a.places))return;const s=new t.maps.places.Autocomplete(_.current,{types:["address"],componentRestrictions:n.country?{country:n.country.toLowerCase()}:void 0});s.addListener("place_changed",()=>{const o=s.getPlace(),u=(o==null?void 0:o.address_components)||[],l=f=>u.find(p=>Array.isArray(p.types)&&p.types.includes(f)),r=f=>{const p=l(f);return p?p.long_name:""},k=r("street_number"),b=r("route"),v=[k,b].filter(Boolean).join(" ")||n.street,P=r("locality")||r("postal_town")||n.city,c=l("administrative_area_level_1"),N=(c==null?void 0:c.short_name)||(c==null?void 0:c.long_name)||n.state,T=r("postal_code")||n.zip,S=l("country"),w=(S==null?void 0:S.short_name)||n.country;Y(f=>({...f,street:v,city:P,state:N,zip:T,country:w})),K(f=>{const p={...f};return delete p.street,delete p.city,delete p.state,delete p.zip,delete p.country,p})})})},[_.current,n.country]),i.useEffect(()=>{X.current&&we().then(()=>{var a;const t=window.google;if(!((a=t==null?void 0:t.maps)!=null&&a.places))return;const s=new t.maps.places.Autocomplete(X.current,{types:["address"],componentRestrictions:d.country?{country:d.country.toLowerCase()}:void 0});s.addListener("place_changed",()=>{const o=s.getPlace(),u=(o==null?void 0:o.address_components)||[],l=f=>u.find(p=>Array.isArray(p.types)&&p.types.includes(f)),r=f=>{const p=l(f);return p?p.long_name:""},k=r("street_number"),b=r("route"),v=[k,b].filter(Boolean).join(" ")||d.street,P=r("locality")||r("postal_town")||d.city,c=l("administrative_area_level_1"),N=(c==null?void 0:c.short_name)||(c==null?void 0:c.long_name)||d.state,T=r("postal_code")||d.zip,S=l("country"),w=(S==null?void 0:S.short_name)||d.country;V(f=>({...f,street:v,city:P,state:N,zip:T,country:w}))})})},[X.current,d.country]);const B=async t=>{const s=ie;if(!s)return!0;const a=t?n:d;if(!a.city||!a.state||!a.zip||!a.country)return!0;const o=[a.city,a.state,a.zip].filter(Boolean).join(", ");try{const u=`https://maps.googleapis.com/maps/api/geocode/json?address=${encodeURIComponent(o)}&components=country:${a.country}&key=${s}`,r=await(await fetch(u)).json();if(!(r&&r.status==="OK"&&Array.isArray(r.results)&&r.results.length>0))return!0;const b=r.results[0].address_components||[],v=(w,f)=>!f||b.some(p=>Array.isArray(p.types)&&p.types.includes(w)&&String(p.long_name).toLowerCase()===String(f).toLowerCase()),P=v("locality",a.city)||v("postal_town",a.city),c=v("administrative_area_level_1",a.state)||b.some(w=>Array.isArray(w.types)&&w.types.includes("administrative_area_level_1")&&String(w.short_name).toLowerCase()===String(a.state).toLowerCase()),N=String(a.zip).split("-")[0].trim(),T=b.some(w=>Array.isArray(w.types)&&w.types.includes("postal_code")&&w.long_name&&String(w.long_name).toLowerCase()===N.toLowerCase()),S={};if(P||(S.city="City does not match zip/state"),c||(S.state="State does not match zip/city"),T||(S.zip="Zip does not match city/state"),t)K(w=>({...w,...S}));else if(Object.keys(S).length>0)return!1;return Object.keys(S).length===0}catch{return!0}},[le,_e]=i.useState(""),[St,Xe]=i.useState(!1),z=(((Ie=C.payment)==null?void 0:Ie.stripePublicKey)||(x==null?void 0:x.VITE_STRIPE_PUBLIC_KEY)||le||"").trim(),[Je,je]=i.useState(""),Se=(ce||Je||"").trim(),Ce=i.useMemo(()=>{if(!z)return null;const t=ct(z);return t.then(s=>{s&&Xe(!0)}).catch(()=>{E("Failed to load Stripe.js. Please check network/ad blocker.")}),t},[z]);i.useEffect(()=>{var a,o;const t=!!((a=C.payment)!=null&&a.enablePO),s=!!((o=C.payment)!=null&&o.enableBankTransfer);A==="PO"&&!t&&Z("CC"),A==="BANK"&&!s&&Z("CC")},[(Le=C.payment)==null?void 0:Le.enablePO,(Re=C.payment)==null?void 0:Re.enableBankTransfer]),i.useEffect(()=>{var t;!((t=C.payment)!=null&&t.stripePublicKey)&&!(x!=null&&x.VITE_STRIPE_PUBLIC_KEY)&&D.get("payments/public-key").then(s=>{s!=null&&s.key&&_e(String(s.key))}).catch(()=>{})},[(Ze=C.payment)==null?void 0:Ze.stripePublicKey]),i.useEffect(()=>{ce||D.get("payments/recaptcha-key").then(t=>{t!=null&&t.key&&je(String(t.key))}).catch(()=>{})},[]),i.useEffect(()=>{if(!z){E("Card payments unavailable: missing Stripe publishable key.");return}D.get("payments/availability").then(t=>{t&&t.enabled?E(""):E("Card payments unavailable: server Stripe configuration missing.")}).catch(t=>{E("Card payments unavailable: server Stripe configuration missing.")})},[z]),i.useEffect(()=>{var o;const t=!!((o=C.payment)!=null&&o.stripePublicKey),s=!!(x!=null&&x.VITE_STRIPE_PUBLIC_KEY),a=!!le;t||s||a?console.debug("[Checkout] Stripe key resolved",{cmsKey:t,envKey:s,resolved:a,stripePublicKey:z}):console.debug("[Checkout] Stripe key missing")},[z,le,(Oe=C.payment)==null?void 0:Oe.stripePublicKey]);const ke=async t=>{if(!(!t.zip||!t.country||!t.city)){ue(!0),ge(""),se([]),W(null);try{const s=await D.post("shipping/rates",{address:{postalCode:t.zip,country:t.country||"US",city:t.city,state:t.state},items:h.map(a=>({sku:a.sku,quantity:a.quantity,weight:a.weight||"1 lb",dimensions:a.dimensions}))});s&&(se(s),s.length>0&&W(s[0]))}catch{setTimeout(()=>{const a=t.country!=="US";let o=[];a?o=[{serviceName:"International Economy",serviceCode:"INTL_ECO",shipmentCost:125,carrierCode:"FedEx",transitDays:10,otherCost:0},{serviceName:"International Priority",serviceCode:"INTL_PRI",shipmentCost:245,carrierCode:"FedEx",transitDays:4,otherCost:0}]:o=[{serviceName:"Standard Ground",serviceCode:"GND",shipmentCost:0,carrierCode:"UPS",transitDays:5,otherCost:0},{serviceName:"2-Day Air",serviceCode:"2DA",shipmentCost:45.5,carrierCode:"UPS",transitDays:2,otherCost:0},{serviceName:"Overnight AM",serviceCode:"1DA",shipmentCost:85,carrierCode:"UPS",transitDays:1,otherCost:0}],se(o),W(o[0]),ge("")},800)}finally{setTimeout(()=>ue(!1),800)}}};i.useEffect(()=>{if(!(!h||h.length===0))try{const t=h.map(a=>({item_id:a.sku,item_name:a.name,price:a.price,quantity:a.quantity})),s=window.gtag;typeof s=="function"&&s("event","begin_checkout",{items:t,value:j,currency:"USD"}),window.dataLayer=window.dataLayer||[],window.dataLayer.push({event:"begin_checkout",items:t,value:j,currency:"USD"})}catch{}},[]),i.useEffect(()=>{if(be.current){be.current=!1;return}if(!(!h||h.length===0))try{const t=window.gtag,s={payment_type:A==="CC"?"card":A==="PO"?"po":"bank_transfer"};typeof t=="function"&&t("event","add_payment_info",s),window.dataLayer=window.dataLayer||[],window.dataLayer.push({event:"add_payment_info",...s})}catch{}},[A]),i.useEffect(()=>{const t=()=>{try{const a=xe.current,o=ve.current,u=Ne.current;if(!(a.email||a.firstName||a.street||u.length>0))return;const r={type:"CHECKOUT",source:"checkout",name:`${a.firstName} ${a.lastName}`.trim(),email:a.email,phone:a.phone,company:a.company,cart:u,shipping:a,billing:o},k=new Blob([JSON.stringify(r)],{type:"application/json"});navigator.sendBeacon("/api/quotes/abandon",k)}catch{}},s=()=>{document.visibilityState==="hidden"&&t()};return window.addEventListener("beforeunload",t),document.addEventListener("visibilitychange",s),()=>{window.removeEventListener("beforeunload",t),document.removeEventListener("visibilitychange",s)}},[]);const y=(t,s,a=!0)=>{let o=s;const u=a?n.country:d.country;t==="phone"&&(o=wt(s,u)),a?(Y(l=>{const r={...l,[t]:o};return t==="country"&&(r.state="",r.phone=""),r}),o.trim()&&K(l=>{const r={...l};return delete r[t],r})):V(l=>{const r={...l,[t]:o};return t==="country"&&(r.state="",r.phone=""),r})},Pe=()=>{const t={},s=q[n.country]||q.US;return n.firstName||(t.firstName="First Name is required"),n.lastName||(t.lastName="Last Name is required"),n.email?/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(n.email)||(t.email="Enter a valid email"):t.email="Email is required",n.street||(t.street="Street Address is required"),n.city||(t.city="City is required"),s.regions.length>0&&!n.state?t.state=`${s.labelState} is required`:(n.country==="US"||n.country==="CA")&&!n.state&&(t.state="State / Province is required"),n.zip||(t.zip="Zip / Postal Code is required"),n.phone||(t.phone="Phone is required"),n.country||(t.country="Country is required"),K(t),Object.keys(t).length===0},Qe=()=>{if(O)return!0;const t=["firstName","lastName","street","city","state","zip"];for(const s of t)if(!d[s])return alert("Please complete all billing address fields."),M("BILLING"),!1;return!0},Ae=()=>{(async()=>{var a;if(!Pe()){window.scrollTo(0,0);return}const s=(x==null?void 0:x.VITE_GOOGLE_MAPS_API_KEY)||"";if(s){const o=[n.street,n.city,n.state,n.zip].filter(Boolean).join(", ");try{const u=`https://maps.googleapis.com/maps/api/geocode/json?address=${encodeURIComponent(o)}&components=country:${n.country}&key=${s}`,r=await(await fetch(u)).json();if(r&&r.status==="OK"&&Array.isArray(r.results)&&r.results.length>0){const b=((a=r.results[0])==null?void 0:a.address_components)||[],v=String(n.zip).split("-")[0].trim().toLowerCase(),P=b.some(c=>(c.types||[]).includes("postal_code")&&c.long_name&&v&&String(c.long_name).toLowerCase()===v);if(v&&!P){K(c=>({...c,zip:"Zip/Postal Code does not match"}));return}}}catch{}}M("BILLING"),ke(n)})()},H=g?g.shipmentCost:0,G=j+H;i.useEffect(()=>{if(!(!g||!h||h.length===0))try{const t=h.map(o=>({item_id:o.sku,item_name:o.name,price:o.price,quantity:o.quantity})),s=window.gtag,a={items:t,shipping_tier:g.serviceCode,value:G,currency:"USD"};typeof s=="function"&&s("event","add_shipping_info",a),window.dataLayer=window.dataLayer||[],window.dataLayer.push({event:"add_shipping_info",...a})}catch{}},[g,G]);const et=t=>{if(t.target.files&&t.target.files[0]){const s=t.target.files[0];s.type==="application/pdf"?(ye(s),E("")):(alert("Please select a valid PDF document."),t.target.value="")}},tt=async(t,s)=>{var u;if(E(""),h.length===0){alert("Your cart is empty.");return}if(!Pe()){M("SHIPPING"),window.scrollTo(0,0);return}if(!g){alert("Please select a shipping method.");return}if(!Qe())return;if(A==="PO"){if(!oe){E("PO Number is required");return}if(!he){E("PO Document upload is required");return}}ne(!0);let a="",o=Se||ce;if(!o)try{const l=await D.get("payments/recaptcha-key");l!=null&&l.key&&(o=String(l.key),je(o))}catch{}o||E("Security verification unavailable. Proceeding without verification.");try{await We(o);const l=window.grecaptcha;if(l){const r=()=>l.execute(o,{action:"checkout"});try{a=await r(),a||(a=await r())}catch{}}}catch{}a||E("Security verification failed. Proceeding without verification.");try{const l=h.map(c=>({id:c.id,sku:c.sku,name:c.name,price:c.price,quantity:c.quantity}));let r=null;if(A==="CC"){if(!t||!s)throw new Error("Payment system unavailable");const c=s.getElement(Ge);if(!c)throw new Error("Card input unavailable");const N=O?n:d,T=(x==null?void 0:x.VITE_GOOGLE_MAPS_API_KEY)||"";if(T&&!O){const p=[N.street,N.city,N.state,N.zip,N.country].filter(Boolean).join(", ");try{const J=await(await fetch(`https://maps.googleapis.com/maps/api/geocode/json?address=${encodeURIComponent(p)}&key=${T}`)).json();if(!(J&&J.status==="OK"&&Array.isArray(J.results)&&J.results.length>0)){alert("Billing address could not be verified."),ne(!1);return}}catch{}}const S=await D.post("/payments/intent",{currency:"usd",amount:Math.round(G*100),items:l.map(p=>({sku:p.sku,quantity:p.quantity})),address:{postalCode:n.zip,country:n.country||"US",city:n.city,state:n.state},serviceCode:g==null?void 0:g.serviceCode,metadata:{shippingCost:H,serviceName:(g==null?void 0:g.serviceName)||""},recaptchaToken:a}),w=S==null?void 0:S.clientSecret;if(!w)throw new Error("Failed to initialize payment");const f=await t.confirmCardPayment(w,{payment_method:{card:c,billing_details:{name:[N.firstName,N.lastName].filter(Boolean).join(" "),email:N.email||n.email||void 0,address:{line1:N.street,city:N.city,state:N.state,postal_code:N.zip,country:N.country}}}});if(f!=null&&f.error)throw new Error(f.error.message||"Card authorization failed");r=f}const k={items:l,total:G,paymentMethod:A==="CC"?"STRIPE":A==="PO"?"PO":"BANK_TRANSFER",poNumber:A==="PO"?oe:void 0,shippingAddress:{...n,shippingCost:H,shipmentService:g==null?void 0:g.serviceName},billingAddress:O?n:d,status:A==="PO"||A==="BANK"?"PENDING_APPROVAL":"PROCESSING",recaptchaToken:a};r&&((u=r==null?void 0:r.paymentIntent)!=null&&u.payment_method)&&(k.paymentMethodId=r.paymentIntent.payment_method);const b=Ke.isAuthenticated()?"/orders":"/orders/guest";let v;try{v=await D.post(b,k)}catch(c){if(String((c==null?void 0:c.message)||"").toLowerCase().includes("unauthorized"))Ke.logout(),v=await D.post("/orders/guest",k);else throw c}const P=(v==null?void 0:v.id)||"ORDER";try{sessionStorage.setItem("lastOrderId",P)}catch{}I(),R(`/thank-you?order=${P}`,{state:{orderNumber:P}})}catch(l){console.error("Order Error:",l),E(l.message||"An unexpected error occurred. Please try again."),ne(!1)}},Ee=t=>q[t]||q.US,U=Ee(n.country),$=Ee(d.country);return e.jsxs("div",{className:"min-h-screen bg-gray-50",children:[e.jsx(it,{}),e.jsxs("div",{className:"container mx-auto px-4 py-10",children:[e.jsx("h1",{className:"text-3xl font-bold text-navy-900 mb-8 text-center",children:"Secure Checkout"}),e.jsxs("div",{className:"max-w-6xl mx-auto grid grid-cols-1 lg:grid-cols-12 gap-8",children:[e.jsx("div",{className:"lg:col-span-7 space-y-6",children:e.jsxs("div",{className:"bg-white p-4 md:p-6 rounded-lg shadow-sm border border-gray-200 min-h-[500px]",children:[e.jsxs("h2",{className:"text-xl font-bold text-navy-900 mb-6 flex items-center gap-2",children:[e.jsx("span",{className:"bg-navy-900 text-white w-6 h-6 rounded-full flex items-center justify-center text-xs",children:"1"}),"Address Information"]}),e.jsxs("div",{className:"flex gap-4 mb-8",children:[e.jsxs("button",{onClick:()=>M("SHIPPING"),className:`flex-1 py-3 border rounded-lg bg-white flex items-center justify-center gap-2 font-medium transition focus:outline-none focus:ring-2 focus:ring-navy-500 ${L==="SHIPPING"?"bg-navy-50 border-navy-500 text-navy-900 ring-1 ring-navy-500 shadow-sm":"border-gray-200 text-gray-500 hover:bg-gray-50"}`,children:[e.jsx(Me,{className:"w-4 h-4"})," Shipping"]}),e.jsxs("button",{onClick:()=>M("BILLING"),className:`flex-1 py-3 border rounded-lg bg-white flex items-center justify-center gap-2 font-medium transition focus:outline-none focus:ring-2 focus:ring-navy-500 ${L==="BILLING"?"bg-navy-50 border-navy-500 text-navy-900 ring-1 ring-navy-500 shadow-sm":"border-gray-200 text-gray-500 hover:bg-gray-50"}`,children:[e.jsx(ze,{className:"w-4 h-4"})," Billing"]})]}),e.jsxs("div",{className:L==="SHIPPING"?"block animate-fadeIn":"hidden",children:[e.jsx("h3",{className:"text-sm font-bold text-gray-500 uppercase tracking-wider mb-4 flex justify-between items-center",children:"Shipping Address"}),e.jsxs("form",{className:"space-y-4",onSubmit:t=>{t.preventDefault(),Ae()},children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("input",{type:"text",placeholder:"First Name",value:n.firstName,onChange:t=>y("firstName",t.target.value),className:`w-full border bg-white rounded p-2.5 text-sm focus:ring-2 focus:ring-navy-900 focus:outline-none ${m.firstName?"border-red-500 bg-red-50":"border-gray-300"}`}),m.firstName&&e.jsx("p",{className:"text-xs text-red-500 mt-1",children:m.firstName})]}),e.jsxs("div",{children:[e.jsx("input",{type:"text",placeholder:"Last Name",value:n.lastName,onChange:t=>y("lastName",t.target.value),className:`w-full border bg-white rounded p-2.5 text-sm focus:ring-2 focus:ring-navy-900 focus:outline-none ${m.lastName?"border-red-500 bg-red-50":"border-gray-300"}`}),m.lastName&&e.jsx("p",{className:"text-xs text-red-500 mt-1",children:m.lastName})]})]}),e.jsx("input",{type:"text",placeholder:"Company Name",value:n.company,onChange:t=>y("company",t.target.value),className:"w-full border border-gray-300 bg-white rounded p-2.5 text-sm focus:ring-2 focus:ring-navy-900 focus:outline-none"}),e.jsxs("div",{children:[e.jsx("input",{type:"email",placeholder:"Email",value:n.email||"",onChange:t=>y("email",t.target.value),className:`w-full border bg-white rounded p-2.5 text-sm focus:ring-2 focus:ring-navy-900 focus:outline-none ${m.email?"border-red-500 bg-red-50":"border-gray-300"}`}),m.email&&e.jsx("p",{className:"text-xs text-red-500 mt-1",children:m.email})]}),e.jsxs("div",{className:"relative",children:[e.jsx("input",{type:"text",placeholder:"Street Address",value:n.street,onChange:t=>y("street",t.target.value),ref:_,className:`w-full border bg-white rounded p-2.5 text-sm focus:ring-2 focus:ring-navy-900 focus:outline-none ${m.street?"border-red-500 bg-red-50":"border-gray-300"}`,autoComplete:"street-address"}),e.jsx(ze,{className:"absolute right-3 top-2.5 w-4 h-4 text-gray-400"}),m.street&&e.jsx("p",{className:"text-xs text-red-500 mt-1",children:m.street})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("div",{children:[e.jsx("input",{type:"text",placeholder:"City",value:n.city,onChange:t=>y("city",t.target.value),onBlur:()=>B(!0),className:`w-full border bg-white rounded p-2.5 col-span-1 text-sm focus:ring-2 focus:ring-navy-900 focus:outline-none ${m.city?"border-red-500 bg-red-50":"border-gray-300"}`}),m.city&&e.jsx("p",{className:"text-xs text-red-500 mt-1",children:m.city})]}),e.jsxs("div",{children:[U.regions.length>0?e.jsxs("select",{value:n.state,onChange:t=>y("state",t.target.value),onBlur:()=>B(!0),className:`w-full border bg-white rounded p-2.5 col-span-1 text-sm focus:ring-2 focus:ring-navy-900 focus:outline-none ${m.state?"border-red-500 bg-red-50":"border-gray-300"}`,children:[e.jsxs("option",{value:"",children:["Select ",U.labelState]}),U.regions.map(t=>e.jsx("option",{value:t,children:t},t))]}):e.jsx("input",{type:"text",placeholder:U.labelState,value:n.state,onChange:t=>y("state",t.target.value),onBlur:()=>B(!0),className:`w-full border bg-white rounded p-2.5 col-span-1 text-sm focus:ring-2 focus:ring-navy-900 focus:outline-none ${m.state?"border-red-500 bg-red-50":"border-gray-300"}`}),m.state&&e.jsx("p",{className:"text-xs text-red-500 mt-1",children:m.state})]}),e.jsxs("div",{children:[e.jsx("input",{type:"text",placeholder:U.labelZip,value:n.zip,onChange:t=>y("zip",t.target.value),onBlur:()=>B(!0),className:`w-full border bg-white rounded p-2.5 col-span-1 text-sm focus:ring-2 focus:ring-navy-900 focus:outline-none ${m.zip?"border-red-500 bg-red-50":"border-gray-300"}`}),m.zip&&e.jsx("p",{className:"text-xs text-red-500 mt-1",children:m.zip})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsx("div",{children:e.jsx("select",{value:n.country,onChange:t=>y("country",t.target.value),className:"w-full border bg-white rounded p-2.5 text-sm focus:ring-2 focus:ring-navy-900 outline-none border-gray-300 text-gray-700",children:Object.entries(q).map(([t,s])=>e.jsx("option",{value:t,children:s.name},t))})}),e.jsxs("div",{className:"relative",children:[e.jsx("span",{className:"absolute left-3 top-2.5 text-gray-500 text-sm pointer-events-none",children:U.code}),e.jsx("input",{type:"tel",placeholder:U.mask,value:n.phone,onChange:t=>y("phone",t.target.value),className:`w-full border bg-white rounded p-2.5 pl-10 text-sm focus:ring-2 focus:ring-navy-900 focus:outline-none ${m.phone?"border-red-500 bg-red-50":"border-gray-300"}`}),m.phone&&e.jsx("p",{className:"text-xs text-red-500 mt-1",children:m.phone})]})]}),e.jsx("div",{className:"mt-8 pt-6 border-t border-gray-100 flex justify-end",children:e.jsxs("button",{type:"button",onClick:Ae,className:"bg-navy-900 hover:bg-navy-800 text-white font-semibold py-2.5 px-6 rounded transition flex items-center gap-2 text-sm",children:["Next: Billing Address",e.jsx(nt,{className:"w-4 h-4"})]})})]})]}),e.jsxs("div",{className:L==="BILLING"?"block animate-fadeIn":"hidden",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsx("h3",{className:"text-sm font-bold text-gray-500 uppercase tracking-wider",children:"Billing Address"}),e.jsxs("label",{className:"flex items-center gap-2 cursor-pointer select-none group",children:[e.jsx("div",{className:`w-5 h-5 border rounded flex items-center justify-center transition-colors ${O?"bg-navy-900 border-navy-900":"bg-white border-gray-300 group-hover:border-navy-500"}`,children:O&&e.jsx(de,{className:"w-3.5 h-3.5 text-white"})}),e.jsx("input",{type:"checkbox",className:"hidden",checked:O,onChange:t=>qe(t.target.checked)}),e.jsx("span",{className:"text-sm text-gray-700 font-medium",children:"Same as shipping"})]})]}),O?e.jsxs("div",{className:"flex flex-col items-center justify-center h-48 text-gray-500 bg-gray-50 rounded border border-dashed border-gray-300",children:[e.jsx(de,{className:"w-8 h-8 text-action-500 mb-2"}),e.jsx("p",{className:"text-sm font-medium",children:"Billing address matches shipping"}),e.jsx("p",{className:"text-xs mt-1",children:"Uncheck the box above to edit"})]}):e.jsxs("form",{className:"space-y-4 bg-gray-50 p-4 md:p-6 rounded border border-gray-200",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsx("input",{type:"text",placeholder:"First Name",value:d.firstName,onChange:t=>y("firstName",t.target.value,!1),className:"w-full border bg-white border-gray-300 rounded p-2.5 text-sm focus:ring-2 focus:ring-navy-900 focus:outline-none"}),e.jsx("input",{type:"text",placeholder:"Last Name",value:d.lastName,onChange:t=>y("lastName",t.target.value,!1),className:"w-full border bg-white border-gray-300 rounded p-2.5 text-sm focus:ring-2 focus:ring-navy-900 focus:outline-none"})]}),e.jsx("input",{type:"text",placeholder:"Company Name",value:d.company,onChange:t=>y("company",t.target.value,!1),className:"w-full border bg-white border-gray-300 rounded p-2.5 text-sm focus:ring-2 focus:ring-navy-900 focus:outline-none"}),e.jsx("input",{type:"email",placeholder:"Email",value:d.email||"",onChange:t=>y("email",t.target.value,!1),className:"w-full border bg-white border-gray-300 rounded p-2.5 text-sm focus:ring-2 focus:ring-navy-900 focus:outline-none"}),e.jsx("input",{type:"text",placeholder:"Street Address",value:d.street,onChange:t=>y("street",t.target.value,!1),ref:X,className:"w-full border bg-white border-gray-300 rounded p-2.5 text-sm focus:ring-2 focus:ring-navy-900 focus:outline-none"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsx("input",{type:"text",placeholder:"City",value:d.city,onChange:t=>y("city",t.target.value,!1),onBlur:()=>B(!1),className:"w-full border bg-white border-gray-300 rounded p-2.5 col-span-1 text-sm focus:ring-2 focus:ring-navy-900 focus:outline-none"}),$.regions.length>0?e.jsxs("select",{value:d.state,onChange:t=>y("state",t.target.value,!1),onBlur:()=>B(!1),className:"w-full border bg-white border-gray-300 rounded p-2.5 col-span-1 text-sm focus:ring-2 focus:ring-navy-900 focus:outline-none",children:[e.jsxs("option",{value:"",children:["Select ",$.labelState]}),$.regions.map(t=>e.jsx("option",{value:t,children:t},t))]}):e.jsx("input",{type:"text",placeholder:$.labelState,value:d.state,onChange:t=>y("state",t.target.value,!1),onBlur:()=>B(!1),className:"w-full border bg-white border-gray-300 rounded p-2.5 col-span-1 text-sm focus:ring-2 focus:ring-navy-900 focus:outline-none"}),e.jsx("input",{type:"text",placeholder:$.labelZip,value:d.zip,onChange:t=>y("zip",t.target.value,!1),onBlur:()=>B(!1),className:"w-full border bg-white border-gray-300 rounded p-2.5 col-span-1 text-sm focus:ring-2 focus:ring-navy-900 focus:outline-none"})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsx("select",{value:d.country,onChange:t=>y("country",t.target.value,!1),className:"w-full border bg-white rounded p-2.5 text-sm focus:ring-2 focus:ring-navy-900 outline-none border-gray-300 text-gray-700",children:Object.entries(q).map(([t,s])=>e.jsx("option",{value:t,children:s.name},t))}),e.jsxs("div",{className:"relative",children:[e.jsx("span",{className:"absolute left-3 top-2.5 text-gray-500 text-sm pointer-events-none",children:$.code}),e.jsx("input",{type:"tel",placeholder:$.mask,value:d.phone,onChange:t=>y("phone",t.target.value,!1),className:"w-full border bg-white rounded p-2.5 pl-10 text-sm focus:ring-2 focus:ring-navy-900 focus:outline-none border-gray-300"})]})]})]})]})]})}),e.jsxs("div",{className:"lg:col-span-5 space-y-6 h-fit lg:sticky lg:top-6",children:[e.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 overflow-hidden",children:[e.jsxs("div",{className:"p-3 md:p-4 bg-gray-50 border-b border-gray-200 flex justify-between items-center cursor-pointer",onClick:()=>fe(!re),children:[e.jsxs("h2",{className:"text-lg font-bold text-navy-900 flex items-center gap-2",children:[e.jsx(pt,{className:"w-5 h-5 text-navy-700"}),"Order Summary ",e.jsxs("span",{className:"text-sm font-normal text-gray-500",children:["(",h.length," items)"]})]}),re?e.jsx(gt,{className:"w-4 h-4 text-gray-500"}):e.jsx(ht,{className:"w-4 h-4 text-gray-500"})]}),re&&e.jsx("div",{className:"max-h-[300px] overflow-y-auto divide-y divide-gray-100 p-3 md:p-4",children:h.length===0?e.jsx("p",{className:"text-sm text-gray-500 text-center py-4",children:"Your cart is empty"}):h.map(t=>e.jsxs("div",{className:"py-3 flex gap-3",children:[e.jsx("div",{className:"h-12 w-12 flex-shrink-0 bg-white border border-gray-200 rounded p-1",children:e.jsx("img",{src:t.image,alt:t.name,className:"h-full w-full object-contain"})}),e.jsxs("div",{className:"flex-grow min-w-0",children:[e.jsx("p",{className:"text-sm font-semibold text-navy-900 truncate",children:t.name}),e.jsxs("p",{className:"text-xs text-gray-500 font-mono",children:["MPN: ",t.sku]}),e.jsx("p",{className:"text-[10px] text-gray-400",children:t.weight||"1 lb"})]}),e.jsxs("div",{className:"text-right",children:[e.jsxs("p",{className:"text-sm font-bold text-navy-900",children:["$",(t.price*t.quantity).toLocaleString()]}),e.jsxs("p",{className:"text-xs text-gray-500",children:["Qty: ",t.quantity]})]})]},t.id))}),e.jsxs("div",{className:"p-4 bg-gray-50 border-t border-gray-200 space-y-2",children:[e.jsxs("div",{className:"flex justify-between text-sm text-gray-600",children:[e.jsx("span",{children:"Subtotal"}),e.jsxs("span",{children:["$",j.toLocaleString()]})]}),e.jsxs("div",{className:"flex justify-between text-sm text-gray-600",children:[e.jsxs("span",{children:["Shipping (",g?g.serviceName:"Pending",")"]}),H===0?e.jsx("span",{className:"text-green-600 font-medium",children:"Free"}):e.jsxs("span",{children:["$",H.toFixed(2)]})]}),e.jsxs("div",{className:"flex justify-between text-lg font-bold text-navy-900 pt-2 border-t border-gray-200 mt-2",children:[e.jsx("span",{children:"Total"}),e.jsxs("span",{children:["$",G.toLocaleString()]})]})]})]}),e.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-sm border border-gray-200",children:[e.jsxs("h2",{className:"text-xl font-bold text-navy-900 mb-4 flex items-center gap-2",children:[e.jsx("span",{className:"bg-navy-900 text-white w-6 h-6 rounded-full flex items-center justify-center text-xs",children:"2"}),"Shipping Method"]}),Fe?e.jsxs("div",{className:"py-8 text-center text-gray-500 flex flex-col items-center",children:[e.jsx($e,{className:"w-8 h-8 animate-spin text-navy-600 mb-2"}),e.jsx("p",{className:"text-sm",children:"Calculating best rates..."})]}):ae.length>0?e.jsx("div",{className:"space-y-3",children:ae.map((t,s)=>e.jsxs("div",{onClick:()=>W(t),className:`flex items-center justify-between p-4 border rounded-lg cursor-pointer transition-all ${(g==null?void 0:g.serviceCode)===t.serviceCode?"border-navy-600 bg-navy-50 ring-1 ring-navy-600":"border-gray-200 hover:border-gray-300"}`,children:[e.jsxs("div",{className:"flex items-center gap-3",children:[t.serviceName.toLowerCase().includes("overnight")||t.serviceName.toLowerCase().includes("express")||t.serviceName.toLowerCase().includes("priority")?e.jsx(Nt,{className:`w-5 h-5 ${(g==null?void 0:g.serviceCode)===t.serviceCode?"text-navy-900":"text-gray-400"}`}):e.jsx(Me,{className:`w-5 h-5 ${(g==null?void 0:g.serviceCode)===t.serviceCode?"text-navy-900":"text-gray-400"}`}),e.jsxs("div",{children:[e.jsx("span",{className:"block font-bold text-navy-900 text-sm",children:t.serviceName}),t.transitDays&&e.jsxs("span",{className:"block text-xs text-gray-500",children:["Est. ",t.transitDays," Days"]})]})]}),e.jsx("span",{className:"font-bold text-navy-900 text-sm",children:t.shipmentCost===0?"Free":`$${t.shipmentCost.toFixed(2)}`})]},s))}):e.jsx("div",{className:"bg-gray-50 border border-gray-200 border-dashed rounded-lg p-6 text-center text-gray-500 text-sm",children:pe?e.jsxs("span",{className:"text-red-500 flex items-center justify-center gap-2",children:[e.jsx(me,{className:"w-4 h-4"})," ",pe]}):"Enter your shipping address to see available rates."}),ae.length>0&&e.jsxs("button",{onClick:()=>ke(n),className:"mt-3 text-xs text-action-600 flex items-center gap-1 hover:underline",children:[e.jsx(yt,{className:"w-3 h-3"})," Refresh Rates"]})]}),Ce?e.jsx(dt,{stripe:Ce,children:e.jsx(jt,{total:G,handlePlaceOrder:tt,isProcessing:Ve,paymentMethod:A,setPaymentMethod:Z,poNumber:oe,setPoNumber:He,poFile:he,setPoFile:ye,handlePoUpload:et,stripeError:Ye,bankInstructions:(Be=C.payment)==null?void 0:Be.bankInstructions,enablePO:!!((Te=C.payment)!=null&&Te.enablePO),enableBankTransfer:!!((De=C.payment)!=null&&De.enableBankTransfer)})}):e.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-sm border border-gray-200 text-center",children:[e.jsx(me,{className:"w-8 h-8 text-red-500 mx-auto mb-2"}),e.jsx("h3",{className:"font-bold text-navy-900",children:"Payment System Unavailable"}),e.jsx("p",{className:"text-sm text-gray-500 mt-1",children:"Stripe keys are missing. Configure a valid publishable key in Admin > Settings or via VITE_STRIPE_PUBLIC_KEY."})]}),e.jsxs("div",{className:"bg-white p-5 rounded-lg border border-gray-200 shadow-sm",children:[e.jsxs("h3",{className:"text-xs font-bold text-gray-400 uppercase tracking-wider mb-4 flex items-center gap-2",children:[e.jsx(ft,{className:"w-4 h-4 text-action-600"}),"Official Vendor Verification"]}),e.jsx("div",{className:"bg-navy-50 rounded border border-navy-100 p-3 mb-4",children:e.jsxs("div",{className:"grid grid-cols-2 gap-2 text-xs font-mono text-navy-800",children:[e.jsxs("div",{children:[e.jsx("span",{className:"block text-gray-500 text-[10px] uppercase font-sans mb-0.5",children:"CAGE Code"}),e.jsx("span",{className:"font-bold tracking-wide",children:ee})]}),e.jsxs("div",{children:[e.jsx("span",{className:"block text-gray-500 text-[10px] uppercase font-sans mb-0.5",children:"DUNS Number"}),e.jsx("span",{className:"font-bold tracking-wide",children:te})]})]})})]})]})]})]}),e.jsx(lt,{})]})};export{Wt as default};
