import{h as U,r as c,k as u,a as E,j as e,C as k}from"./index-CFXgF25F.js";import I from"./Header-C_SW7nKS.js";import T from"./Footer-B1Tu_7x4.js";import{P as A}from"./package-utPRiDqv.js";import{F as b}from"./file-text-Bqo2hmfu.js";import{C as R,a as L}from"./chevron-up-Cjtcu5WR.js";import{M}from"./map-pin-B0QKroLD.js";import{C as Q}from"./clock-rqFjTchC.js";import{T as _}from"./truck-i18wuND8.js";import{A as B}from"./alert-triangle-DTqsUDXd.js";import"./mail-BAG_jpJT.js";import"./phone-BECx4-5W.js";import"./Image-1076sJ0o.js";import"./log-out-DrwdvGzO.js";import"./upload-Bi7gtjrF.js";import"./shopping-cart-DYMnb0eQ.js";import"./user-B-hCEkTO.js";import"./shield-check-Cy8fN0mD.js";import"./award-B6s_1h76.js";import"./lock-Cz0cqC_5.js";const P=({status:l})=>{const a=l.toUpperCase();return a==="PROCESSING"||a==="NEW"?e.jsxs("span",{className:"bg-blue-100 text-blue-700 px-2 py-1 rounded-full text-xs font-bold flex items-center gap-1 w-fit",children:[e.jsx(Q,{className:"w-3 h-3"})," Processing"]}):a==="SHIPPED"||a==="QUOTE SENT"||a==="QUOTE_READY"?e.jsxs("span",{className:"bg-purple-100 text-purple-700 px-2 py-1 rounded-full text-xs font-bold flex items-center gap-1 w-fit",children:[e.jsx(_,{className:"w-3 h-3"})," ",a==="SHIPPED"?"Shipped":"Quote Ready"]}):a==="DELIVERED"||a==="COMPLETED"?e.jsxs("span",{className:"bg-green-100 text-green-700 px-2 py-1 rounded-full text-xs font-bold flex items-center gap-1 w-fit",children:[e.jsx(k,{className:"w-3 h-3"})," Completed"]}):a==="PENDING_APPROVAL"||a==="PENDING"?e.jsxs("span",{className:"bg-orange-100 text-orange-700 px-2 py-1 rounded-full text-xs font-bold flex items-center gap-1 w-fit",children:[e.jsx(B,{className:"w-3 h-3"})," Pending"]}):e.jsx("span",{className:"bg-gray-100 text-gray-600 px-2 py-1 rounded-full text-xs font-bold w-fit",children:l})},de=()=>{const l=U(),[a,G]=c.useState(u.getUser()),[h,N]=c.useState("orders"),[f,y]=c.useState([]),[j,w]=c.useState([]),[C,v]=c.useState(!0),[g,D]=c.useState(null);c.useEffect(()=>{if(!u.isAuthenticated()){l("/login");return}const s=u.getUserId();v(!0),(async()=>{if(s)try{const r=await E.get("/orders/my");y(Array.isArray(r)?r:[]);const i=await E.get("/quotes/my"),d=(Array.isArray(i)?i:[]).map(t=>{var o,x,m,p,n;return{id:t.id,type:t.type==="BOM_UPLOAD"?"BOM_UPLOAD":t.type==="BULK_QUOTE"?"BULK_QUOTE":"CONCIERGE",submittedAt:t.createdAt,sourceUrl:"",status:t.status==="REVIEWED"?"QUOTE_READY":t.status==="ACCEPTED"?"COMPLETED":"PENDING",data:{name:t.guestName,email:((o=t.user)==null?void 0:o.email)||t.guestEmail,phone:t.guestPhone,company:t.guestCompany,parts:(x=t.submissionData)==null?void 0:x.parts,timeline:(m=t.submissionData)==null?void 0:m.timeline,fileName:(p=t.submissionData)==null?void 0:p.fileName,notes:(n=t.submissionData)==null?void 0:n.notes,quoteNumber:t.referenceNumber}}});w(d)}catch{y([]),w([])}finally{v(!1)}})()},[l,a.email]);const O=s=>{D(g===s?null:s)};return e.jsxs("div",{className:"min-h-screen bg-gray-50 flex flex-col",children:[e.jsx(I,{}),e.jsx("main",{className:"flex-grow container mx-auto px-4 py-10",children:e.jsxs("div",{className:"max-w-5xl mx-auto",children:[e.jsxs("div",{className:"mb-8 flex flex-col md:flex-row justify-between items-start md:items-center gap-4",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-navy-900",children:"My Account"}),e.jsxs("p",{className:"text-gray-500 mt-1",children:["Welcome back, ",a.name]})]}),e.jsxs("div",{className:"flex gap-2 bg-white p-1 rounded-lg border border-gray-200 shadow-sm",children:[e.jsx("button",{onClick:()=>N("orders"),className:`px-4 py-2 rounded-md text-sm font-bold transition ${h==="orders"?"bg-navy-900 text-white shadow-sm":"text-gray-600 hover:bg-gray-100"}`,children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(A,{className:"w-4 h-4"})," My Orders"]})}),e.jsx("button",{onClick:()=>N("requests"),className:`px-4 py-2 rounded-md text-sm font-bold transition ${h==="requests"?"bg-navy-900 text-white shadow-sm":"text-gray-600 hover:bg-gray-100"}`,children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(b,{className:"w-4 h-4"})," Quote Requests"]})})]})]}),C?e.jsx("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-12 text-center",children:e.jsxs("div",{className:"animate-pulse flex flex-col items-center",children:[e.jsx("div",{className:"h-4 w-32 bg-gray-200 rounded mb-4"}),e.jsx("div",{className:"h-64 w-full bg-gray-100 rounded"})]})}):e.jsxs(e.Fragment,{children:[h==="orders"&&e.jsx("div",{className:"space-y-4",children:f.length===0?e.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-12 text-center",children:[e.jsx(A,{className:"w-12 h-12 text-gray-300 mx-auto mb-4"}),e.jsx("h3",{className:"text-lg font-bold text-navy-900",children:"No Orders Yet"}),e.jsx("p",{className:"text-gray-500 mb-6",children:"Start building your infrastructure today."}),e.jsx("button",{onClick:()=>l("/category"),className:"bg-action-600 text-white px-6 py-2 rounded font-bold hover:bg-action-500 transition",children:"Browse Catalog"})]}):f.map(s=>{var r,i,d,t,o,x,m,p;return e.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 overflow-hidden",children:[e.jsxs("div",{className:"p-6 flex flex-col md:flex-row justify-between items-start md:items-center cursor-pointer hover:bg-gray-50 transition border-b border-gray-100",onClick:()=>O(s.id),children:[e.jsxs("div",{className:"flex flex-col gap-1",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("span",{className:"text-lg font-bold text-navy-900",children:s.id}),e.jsx(P,{status:s.status})]}),e.jsxs("span",{className:"text-sm text-gray-500",children:[new Date(s.createdAt).toLocaleDateString()," â€¢ ",(r=s.items)==null?void 0:r.length," Items"]})]}),e.jsxs("div",{className:"flex items-center gap-6 mt-4 md:mt-0",children:[e.jsxs("span",{className:"text-lg font-bold text-navy-900",children:["$",Number(s.total).toLocaleString()]}),g===s.id?e.jsx(R,{className:"w-5 h-5 text-gray-400"}):e.jsx(L,{className:"w-5 h-5 text-gray-400"})]})]}),g===s.id&&e.jsxs("div",{className:"bg-gray-50 p-6 border-t border-gray-200 animate-fadeIn",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-8 mb-6",children:[e.jsxs("div",{children:[e.jsxs("h4",{className:"text-xs font-bold text-gray-500 uppercase tracking-wider mb-2 flex items-center gap-2",children:[e.jsx(M,{className:"w-3 h-3"})," Shipping Address"]}),e.jsxs("div",{className:"text-sm text-gray-700 bg-white p-3 rounded border border-gray-200",children:[e.jsxs("p",{className:"font-bold",children:[(i=s.shippingAddress)==null?void 0:i.firstName," ",(d=s.shippingAddress)==null?void 0:d.lastName]}),e.jsx("p",{children:(t=s.shippingAddress)==null?void 0:t.street}),e.jsxs("p",{children:[(o=s.shippingAddress)==null?void 0:o.city,", ",(x=s.shippingAddress)==null?void 0:x.state," ",(m=s.shippingAddress)==null?void 0:m.zip]})]})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"text-xs font-bold text-gray-500 uppercase tracking-wider mb-2",children:"Payment Method"}),e.jsx("div",{className:"text-sm text-gray-700 bg-white p-3 rounded border border-gray-200",children:s.paymentMethod==="PO"?e.jsxs("p",{className:"font-mono",children:["Purchase Order: ",e.jsx("strong",{children:s.poNumber})]}):e.jsx("p",{children:"Credit Card"})})]})]}),e.jsx("h4",{className:"text-xs font-bold text-gray-500 uppercase tracking-wider mb-3",children:"Items Ordered"}),e.jsx("div",{className:"bg-white rounded-lg border border-gray-200 overflow-hidden",children:e.jsxs("table",{className:"w-full text-sm",children:[e.jsx("thead",{className:"bg-gray-50 text-gray-500 border-b border-gray-200",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-4 py-2 text-left",children:"Product"}),e.jsx("th",{className:"px-4 py-2 text-center",children:"Qty"}),e.jsx("th",{className:"px-4 py-2 text-right",children:"Price"})]})}),e.jsx("tbody",{children:(p=s.items)==null?void 0:p.map((n,S)=>e.jsxs("tr",{className:"border-b last:border-0",children:[e.jsxs("td",{className:"px-4 py-3",children:[e.jsx("div",{className:"font-medium text-navy-900",children:n.name}),e.jsx("div",{className:"text-xs text-gray-500 font-mono",children:n.sku})]}),e.jsx("td",{className:"px-4 py-3 text-center",children:n.quantity}),e.jsxs("td",{className:"px-4 py-3 text-right font-medium",children:["$",((n.basePrice||n.price)*n.quantity).toLocaleString()]})]},S))})]})})]})]},s.id)})}),h==="requests"&&e.jsx("div",{className:"space-y-4",children:j.length===0?e.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-12 text-center",children:[e.jsx(b,{className:"w-12 h-12 text-gray-300 mx-auto mb-4"}),e.jsx("h3",{className:"text-lg font-bold text-navy-900",children:"No Quote Requests"}),e.jsx("p",{className:"text-gray-500 mb-6",children:"Need a custom configuration or bulk pricing?"}),e.jsx("button",{onClick:()=>l("/upload-bom"),className:"bg-navy-900 text-white px-6 py-2 rounded font-bold hover:bg-navy-800 transition",children:"Upload BOM"})]}):j.map(s=>{var r,i,d;return e.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6 flex flex-col md:flex-row justify-between items-start md:items-center",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center gap-3 mb-1",children:[e.jsx("span",{className:"text-lg font-bold text-navy-900",children:s.type==="BOM_UPLOAD"?"BOM Upload":"Concierge Request"}),e.jsx(P,{status:s.status})]}),e.jsxs("p",{className:"text-sm text-gray-500 font-mono mb-2",children:["Ref: ",((r=s.data)==null?void 0:r.quoteNumber)||s.id]}),((i=s.data)==null?void 0:i.parts)&&e.jsxs("p",{className:"text-sm text-gray-600 line-clamp-1 max-w-md",children:['"',s.data.parts,'"']}),((d=s.data)==null?void 0:d.fileName)&&e.jsxs("div",{className:"flex items-center gap-2 text-sm text-blue-600 bg-blue-50 px-2 py-1 rounded w-fit",children:[e.jsx(b,{className:"w-3 h-3"})," ",s.data.fileName]})]}),e.jsxs("div",{className:"mt-4 md:mt-0 text-right",children:[e.jsx("p",{className:"text-xs text-gray-400 mb-1",children:new Date(s.submittedAt).toLocaleDateString()}),s.status==="QUOTE_READY"&&e.jsx("button",{className:"bg-green-600 text-white px-4 py-1.5 rounded text-xs font-bold hover:bg-green-500 transition",children:"Download Quote"})]})]},s.id)})})]})]})}),e.jsx(T,{})]})};export{de as default};
