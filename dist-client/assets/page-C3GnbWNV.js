import{c as U,h as C,u as O,r as x,k as R,j as e,X as M,L as P,a as q}from"./index-CFXgF25F.js";import A from"./Header-C_SW7nKS.js";import B from"./Footer-B1Tu_7x4.js";import{F as g}from"./file-text-Bqo2hmfu.js";import{U as I}from"./upload-Bi7gtjrF.js";import{S as T}from"./send-C_9ndNK4.js";import{A as V}from"./alert-circle-Bm76VoOK.js";import"./mail-BAG_jpJT.js";import"./phone-BECx4-5W.js";import"./Image-1076sJ0o.js";import"./log-out-DrwdvGzO.js";import"./shopping-cart-DYMnb0eQ.js";import"./user-B-hCEkTO.js";import"./shield-check-Cy8fN0mD.js";import"./award-B6s_1h76.js";import"./lock-Cz0cqC_5.js";/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const z=U("File",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}]]),u={BASE_URL:"/",DEV:!1,MODE:"production",PROD:!0,SSR:!1},re=()=>{const N=C(),{showToast:y}=O(),[a,v]=x.useState(null),c=x.useRef(null),[s,m]=x.useState({name:"",email:"",phone:"",company:"",notes:""}),[b,j]=x.useState(!1);x.useEffect(()=>{const t=R.getUser();t.email&&m(r=>({...r,name:t.name||"",email:t.email}))},[]);const w=t=>{var r;if(t.target.files&&t.target.files[0]){const n=t.target.files[0],d=["application/vnd.ms-excel","application/vnd.openxmlformats-officedocument.spreadsheetml.sheet","text/csv","application/pdf","application/x-pdf"],l=["csv","xls","xlsx","pdf"],o=(r=n.name.split(".").pop())==null?void 0:r.toLowerCase(),p=d.includes(n.type)||o&&l.includes(o);if(n.size>5*1024*1024){alert("File is too large. Please upload a file under 5MB."),c.current&&(c.current.value="");return}p?(v(n),y("File attached successfully","success")):(alert("Invalid file format. Please upload an Excel sheet (.xls, .xlsx), CSV, or PDF file."),c.current&&(c.current.value=""))}},S=t=>{t.preventDefault(),v(null),c.current&&(c.current.value="")},F=async t=>{if(t.preventDefault(),!a){alert("Please select a file to upload.");return}j(!0);try{const n=await(i=>new Promise((h,L)=>{const f=new FileReader;f.onload=()=>h(String(f.result)),f.onerror=k=>L(k),f.readAsDataURL(i)}))(a),d={...s,fileName:a.name,fileContent:n},l=await q.post("/quotes/request/bom",d),o=(l==null?void 0:l.referenceNumber)||"SUBMITTED",p=window.gtag;if(p){const i=String((u==null?void 0:u.VITE_GOOGLE_ADS_ID)||""),h=String((u==null?void 0:u.VITE_GOOGLE_ADS_LEAD_LABEL)||"");i&&h&&p("event","conversion",{send_to:`${i}/${h}`});try{p("event","generate_lead",{method:"upload_bom"})}catch{}}try{const i=window.gtag_report_conversion;i&&i()}catch{}try{window.dataLayer=window.dataLayer||[],window.dataLayer.push({event:"quote_submit",method:"upload_bom",email:s.email||"",file_name:a.name})}catch{}try{typeof sessionStorage<"u"&&sessionStorage.setItem("lastQuoteNumber",o)}catch(i){console.warn("Storage access restricted",i)}N(`/thank-you?quote=${o}`,{state:{quoteNumber:o}})}catch(r){console.error("Upload Error:",r),y("Failed to upload BOM. Please try again.","error")}finally{j(!1)}};x.useEffect(()=>{const t=()=>{try{if(!(s.email||s.name||(a==null?void 0:a.name)))return;const n={type:"FORM",source:"upload-bom",name:s.name,email:s.email,phone:s.phone,company:s.company,notes:s.notes},d=new Blob([JSON.stringify(n)],{type:"application/json"});navigator.sendBeacon("/api/quotes/abandon",d)}catch{}};return window.addEventListener("beforeunload",t),document.addEventListener("visibilitychange",()=>{document.visibilityState==="hidden"&&t()}),()=>window.removeEventListener("beforeunload",t)},[s,a]);const E=()=>{const t=["Part Number","Quantity","Manufacturer (Optional)","Notes (Optional)"],r=["R740-XEON-GOLD","10","Dell","Need rails for 19-inch rack"],n=[t.join(","),r.join(",")].join(`
`),d=new Blob([n],{type:"text/csv;charset=utf-8;"}),l=document.createElement("a"),o=URL.createObjectURL(d);l.setAttribute("href",o),l.setAttribute("download","BOM_Template.csv"),document.body.appendChild(l),l.click(),document.body.removeChild(l),URL.revokeObjectURL(o)},D=t=>t.toLowerCase().endsWith(".pdf")?e.jsx(z,{className:"w-8 h-8 text-red-500"}):e.jsx(g,{className:"w-8 h-8 text-green-600"});return e.jsxs("div",{className:"min-h-screen bg-gray-50 flex flex-col",children:[e.jsx(A,{}),e.jsx("main",{className:"flex-grow container mx-auto px-4 py-12",children:e.jsxs("div",{className:"max-w-5xl mx-auto",children:[e.jsxs("div",{className:"text-center mb-12",children:[e.jsx("h1",{className:"text-3xl md:text-4xl font-bold text-navy-900 mb-4",children:"Upload Bill of Materials"}),e.jsx("p",{className:"text-gray-600 max-w-2xl mx-auto text-lg",children:"Streamline your procurement. Upload your parts list, and let our automated system match SKUs and generate a volume quote for you."})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[e.jsx("div",{className:"lg:col-span-2 bg-white rounded-xl shadow-sm border border-gray-200 p-6 md:p-8",children:e.jsxs("form",{onSubmit:F,className:"space-y-6",children:[e.jsxs("div",{className:"bg-blue-50 border border-blue-100 p-4 rounded-lg flex gap-3 mb-6",children:[e.jsx("div",{className:"bg-white p-2 rounded-full h-fit shadow-sm",children:e.jsx(g,{className:"w-5 h-5 text-action-600"})}),e.jsxs("div",{className:"text-sm text-blue-800",children:[e.jsx("p",{className:"font-bold mb-1",children:"Supported Formats"}),e.jsxs("p",{children:["We accept ",e.jsx("strong",{children:".XLS, .XLSX, .CSV, and .PDF"})," files. Ensure your document includes Part Numbers (MPN) and Quantities."]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-semibold text-gray-700 mb-1",children:["Full Name ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{type:"text",required:!0,value:s.name,onChange:t=>m({...s,name:t.target.value}),className:"w-full border border-gray-300 bg-white rounded-lg px-4 py-2.5 text-sm focus:ring-2 focus:ring-navy-900 outline-none",placeholder:"Jane Doe"})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-semibold text-gray-700 mb-1",children:["Company Name ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{type:"text",required:!0,value:s.company,onChange:t=>m({...s,company:t.target.value}),className:"w-full border border-gray-300 bg-white rounded-lg px-4 py-2.5 text-sm focus:ring-2 focus:ring-navy-900 outline-none",placeholder:"Enterprise Corp"})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-semibold text-gray-700 mb-1",children:["Email Address ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{type:"email",required:!0,value:s.email,onChange:t=>m({...s,email:t.target.value}),className:"w-full border border-gray-300 bg-white rounded-lg px-4 py-2.5 text-sm focus:ring-2 focus:ring-navy-900 outline-none",placeholder:"procurement@company.com"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-1",children:"Phone Number"}),e.jsx("input",{type:"tel",value:s.phone,onChange:t=>m({...s,phone:t.target.value}),className:"w-full border border-gray-300 bg-white rounded-lg px-4 py-2.5 text-sm focus:ring-2 focus:ring-navy-900 outline-none",placeholder:"(555) 123-4567"})]})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:["Upload File ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsxs("div",{className:`w-full border-2 border-dashed rounded-xl transition-all overflow-hidden relative ${a?"border-action-500 bg-action-50 p-4":"border-gray-300 hover:border-navy-400 hover:bg-gray-50 py-12 px-6 text-center"}`,children:[e.jsx("input",{type:"file",id:"bom-upload",ref:c,className:"hidden",accept:".csv, .xls, .xlsx, .pdf, application/pdf, application/vnd.ms-excel, application/vnd.openxmlformats-officedocument.spreadsheetml.sheet",onChange:w}),a?e.jsxs("div",{className:"flex items-center justify-between w-full",children:[e.jsxs("div",{className:"flex items-center gap-4 flex-1 min-w-0",children:[e.jsx("div",{className:"flex-shrink-0 bg-white p-2 rounded-lg border border-action-100 shadow-sm",children:D(a.name)}),e.jsxs("div",{className:"min-w-0 flex-1",children:[e.jsx("p",{className:"font-bold text-navy-900 text-sm truncate",title:a.name,children:a.name}),e.jsxs("p",{className:"text-xs text-gray-500 mt-0.5",children:[(a.size/1024).toFixed(1)," KB"]})]})]}),e.jsx("button",{onClick:S,className:"ml-4 p-2 text-gray-400 hover:text-red-500 hover:bg-red-50 rounded-full transition-colors",title:"Remove file",children:e.jsx(M,{className:"w-5 h-5"})})]}):e.jsxs("label",{htmlFor:"bom-upload",className:"cursor-pointer flex flex-col items-center w-full h-full justify-center",children:[e.jsx("div",{className:"w-14 h-14 bg-navy-100 text-navy-600 rounded-full flex items-center justify-center mb-3 flex-shrink-0",children:e.jsx(I,{className:"w-7 h-7"})}),e.jsx("span",{className:"text-navy-900 font-bold text-base",children:"Click to upload or drag and drop"}),e.jsx("span",{className:"text-sm text-gray-500 mt-2",children:"Excel, CSV, or PDF (Max 5MB)"})]})]}),a&&e.jsx("div",{className:"mt-2 text-right",children:e.jsx("label",{htmlFor:"bom-upload",className:"text-xs text-action-600 font-bold hover:underline cursor-pointer",children:"Replace File"})})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-1",children:"Notes / Special Requirements"}),e.jsx("textarea",{rows:3,value:s.notes,onChange:t=>m({...s,notes:t.target.value}),className:"w-full border border-gray-300 bg-white rounded-lg px-4 py-2.5 text-sm focus:ring-2 focus:ring-navy-900 outline-none",placeholder:"E.g. Need delivery by Friday, prefer New Retail packaging..."})]}),e.jsxs("button",{type:"submit",disabled:b||!a,className:"w-full bg-navy-900 hover:bg-navy-800 disabled:bg-gray-300 disabled:cursor-not-allowed text-white font-bold py-4 rounded-lg shadow-lg transition transform active:scale-[0.99] flex items-center justify-center gap-2",children:[b?e.jsx(P,{className:"w-5 h-5 animate-spin"}):e.jsx(T,{className:"w-5 h-5"}),b?"Transmitting Securely...":"Submit BOM for Quote"]}),e.jsx("p",{className:"text-center text-xs text-gray-400",children:"Your data is encrypted and sent directly to our secure sales server."})]})}),e.jsxs("div",{className:"space-y-6 lg:sticky lg:top-24",children:[e.jsxs("div",{className:"bg-white p-6 rounded-xl border border-gray-200 shadow-sm",children:[e.jsxs("h3",{className:"font-bold text-navy-900 mb-4 flex items-center gap-2",children:[e.jsx(V,{className:"w-5 h-5 text-action-600"}),"Process Overview"]}),e.jsxs("div",{className:"relative border-l-2 border-navy-100 pl-6 ml-2 space-y-8 py-2",children:[e.jsxs("div",{className:"relative",children:[e.jsx("span",{className:"absolute -left-[31px] bg-navy-900 text-white w-6 h-6 rounded-full flex items-center justify-center font-bold text-xs",children:"1"}),e.jsx("h4",{className:"font-bold text-sm text-navy-900",children:"Upload & Match"}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Our system scans your file for MPNs against our 500k+ SKU inventory."})]}),e.jsxs("div",{className:"relative",children:[e.jsx("span",{className:"absolute -left-[31px] bg-navy-900 text-white w-6 h-6 rounded-full flex items-center justify-center font-bold text-xs",children:"2"}),e.jsx("h4",{className:"font-bold text-sm text-navy-900",children:"Price Optimization"}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Account managers apply volume discounts and check global stock."})]}),e.jsxs("div",{className:"relative",children:[e.jsx("span",{className:"absolute -left-[31px] bg-navy-900 text-white w-6 h-6 rounded-full flex items-center justify-center font-bold text-xs",children:"3"}),e.jsx("h4",{className:"font-bold text-sm text-navy-900",children:"Quote Delivery"}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"You receive a formal PDF quote with lead times via email."})]})]})]}),e.jsxs("div",{className:"bg-gradient-to-br from-navy-900 to-navy-800 text-white p-6 rounded-xl shadow-lg",children:[e.jsx("h3",{className:"font-bold mb-2",children:"Need a Template?"}),e.jsx("p",{className:"text-sm text-gray-300 mb-4",children:"Use our standardized Excel template for faster processing and fewer errors."}),e.jsxs("button",{onClick:E,className:"w-full py-2.5 bg-white/10 hover:bg-white/20 border border-white/30 rounded-lg text-sm font-semibold transition flex items-center justify-center gap-2",children:[e.jsx(g,{className:"w-4 h-4"})," Download Template"]})]})]})]})]})}),e.jsx(B,{})]})};export{re as default};
